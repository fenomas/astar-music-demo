(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}})();const Ze=(e,t)=>e===t,Te={equals:Ze};let et=Be;const N=1,U=2,$e={owned:null,cleanups:null,context:null,owner:null};var A=null;let J=null,tt=null,b=null,T=null,k=null,z=0;function rt(e,t){const r=b,s=A,n=e.length===0,a=t===void 0?s:t,l=n?$e:{owned:null,cleanups:null,context:a?a.context:null,owner:a},i=n?e:()=>e(()=>de(()=>q(l)));A=l,b=null;try{return I(i,!0)}finally{b=r,A=s}}function ve(e,t){t=t?Object.assign({},Te,t):Te;const r={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},s=n=>(typeof n=="function"&&(n=n(r.value)),De(r,n));return[nt.bind(r),s]}function ne(e,t,r){const s=at(e,t,!1,N);pe(s)}function de(e){if(b===null)return e();const t=b;b=null;try{return e()}finally{b=t}}function nt(){if(this.sources&&this.state)if(this.state===N)pe(this);else{const e=T;T=null,I(()=>H(this),!1),T=e}if(b){const e=this.observers?this.observers.length:0;b.sources?(b.sources.push(this),b.sourceSlots.push(e)):(b.sources=[this],b.sourceSlots=[e]),this.observers?(this.observers.push(b),this.observerSlots.push(b.sources.length-1)):(this.observers=[b],this.observerSlots=[b.sources.length-1])}return this.value}function De(e,t,r){let s=e.value;return(!e.comparator||!e.comparator(s,t))&&(e.value=t,e.observers&&e.observers.length&&I(()=>{for(let n=0;n<e.observers.length;n+=1){const a=e.observers[n],l=J&&J.running;l&&J.disposed.has(a),(l?!a.tState:!a.state)&&(a.pure?T.push(a):k.push(a),a.observers&&Le(a)),l||(a.state=N)}if(T.length>1e6)throw T=[],new Error},!1)),t}function pe(e){if(!e.fn)return;q(e);const t=z;st(e,e.value,t)}function st(e,t,r){let s;const n=A,a=b;b=A=e;try{s=e.fn(t)}catch(l){return e.pure&&(e.state=N,e.owned&&e.owned.forEach(q),e.owned=null),e.updatedAt=r+1,Fe(l)}finally{b=a,A=n}(!e.updatedAt||e.updatedAt<=r)&&(e.updatedAt!=null&&"observers"in e?De(e,s):e.value=s,e.updatedAt=r)}function at(e,t,r,s=N,n){const a={fn:e,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:A,context:A?A.context:null,pure:r};return A===null||A!==$e&&(A.owned?A.owned.push(a):A.owned=[a]),a}function xe(e){if(e.state===0)return;if(e.state===U)return H(e);if(e.suspense&&de(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<z);)e.state&&t.push(e);for(let r=t.length-1;r>=0;r--)if(e=t[r],e.state===N)pe(e);else if(e.state===U){const s=T;T=null,I(()=>H(e,t[0]),!1),T=s}}function I(e,t){if(T)return e();let r=!1;t||(T=[]),k?r=!0:k=[],z++;try{const s=e();return it(r),s}catch(s){r||(k=null),T=null,Fe(s)}}function it(e){if(T&&(Be(T),T=null),e)return;const t=k;k=null,t.length&&I(()=>et(t),!1)}function Be(e){for(let t=0;t<e.length;t++)xe(e[t])}function H(e,t){e.state=0;for(let r=0;r<e.sources.length;r+=1){const s=e.sources[r];if(s.sources){const n=s.state;n===N?s!==t&&(!s.updatedAt||s.updatedAt<z)&&xe(s):n===U&&H(s,t)}}}function Le(e){for(let t=0;t<e.observers.length;t+=1){const r=e.observers[t];r.state||(r.state=U,r.pure?T.push(r):k.push(r),r.observers&&Le(r))}}function q(e){let t;if(e.sources)for(;e.sources.length;){const r=e.sources.pop(),s=e.sourceSlots.pop(),n=r.observers;if(n&&n.length){const a=n.pop(),l=r.observerSlots.pop();s<n.length&&(a.sourceSlots[l]=s,n[s]=a,r.observerSlots[s]=l)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)q(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)q(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function lt(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Fe(e,t=A){throw lt(e)}function ot(e,t){return de(()=>e(t||{}))}function ut(e,t,r){let s=r.length,n=t.length,a=s,l=0,i=0,u=t[n-1].nextSibling,h=null;for(;l<n||i<a;){if(t[l]===r[i]){l++,i++;continue}for(;t[n-1]===r[a-1];)n--,a--;if(n===l){const v=a<s?i?r[i-1].nextSibling:r[a-i]:u;for(;i<a;)e.insertBefore(r[i++],v)}else if(a===i)for(;l<n;)(!h||!h.has(t[l]))&&t[l].remove(),l++;else if(t[l]===r[a-1]&&r[i]===t[n-1]){const v=t[--n].nextSibling;e.insertBefore(r[i++],t[l++].nextSibling),e.insertBefore(r[--a],v),t[n]=r[a]}else{if(!h){h=new Map;let o=i;for(;o<a;)h.set(r[o],o++)}const v=h.get(t[l]);if(v!=null)if(i<v&&v<a){let o=l,d=1,f;for(;++o<n&&o<a&&!((f=h.get(t[o]))==null||f!==v+d);)d++;if(d>v-i){const c=t[l];for(;i<v;)e.insertBefore(r[i++],c)}else e.replaceChild(r[i++],t[l++])}else l++;else t[l++].remove()}}}const Ae="_$DX_DELEGATE";function ft(e,t,r,s={}){let n;return rt(a=>{n=a,t===document?e():Q(t,e(),t.firstChild?null:void 0,r)},s.owner),()=>{n(),t.textContent=""}}function We(e,t,r){let s;const n=()=>{const l=document.createElement("template");return l.innerHTML=e,l.content.firstChild},a=()=>(s||(s=n())).cloneNode(!0);return a.cloneNode=a,a}function ct(e,t=window.document){const r=t[Ae]||(t[Ae]=new Set);for(let s=0,n=e.length;s<n;s++){const a=e[s];r.has(a)||(r.add(a),t.addEventListener(a,ht))}}function Q(e,t,r,s){if(r!==void 0&&!s&&(s=[]),typeof t!="function")return j(e,t,s,r);ne(n=>j(e,t(),n,r),s)}function ht(e){let t=e.target;const r=`$$${e.type}`,s=e.target,n=e.currentTarget,a=u=>Object.defineProperty(e,"target",{configurable:!0,value:u}),l=()=>{const u=t[r];if(u&&!t.disabled){const h=t[`${r}Data`];if(h!==void 0?u.call(t,h,e):u.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&a(t.host),!0},i=()=>{for(;l()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const u=e.composedPath();a(u[0]);for(let h=0;h<u.length-2&&(t=u[h],!!l());h++){if(t._$host){t=t._$host,i();break}if(t.parentNode===n)break}}else i();a(s)}function j(e,t,r,s,n){for(;typeof r=="function";)r=r();if(t===r)return r;const a=typeof t,l=s!==void 0;if(e=l&&r[0]&&r[0].parentNode||e,a==="string"||a==="number"){if(a==="number"&&(t=t.toString(),t===r))return r;if(l){let i=r[0];i&&i.nodeType===3?i.data!==t&&(i.data=t):i=document.createTextNode(t),r=V(e,r,s,i)}else r!==""&&typeof r=="string"?r=e.firstChild.data=t:r=e.textContent=t}else if(t==null||a==="boolean")r=V(e,r,s);else{if(a==="function")return ne(()=>{let i=t();for(;typeof i=="function";)i=i();r=j(e,i,r,s)}),()=>r;if(Array.isArray(t)){const i=[],u=r&&Array.isArray(r);if(se(i,t,r,n))return ne(()=>r=j(e,i,r,s,!0)),()=>r;if(i.length===0){if(r=V(e,r,s),l)return r}else u?r.length===0?Ee(e,i,s):ut(e,r,i):(r&&V(e),Ee(e,i));r=i}else if(t.nodeType){if(Array.isArray(r)){if(l)return r=V(e,r,s,t);V(e,r,null,t)}else r==null||r===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);r=t}}return r}function se(e,t,r,s){let n=!1;for(let a=0,l=t.length;a<l;a++){let i=t[a],u=r&&r[e.length],h;if(!(i==null||i===!0||i===!1))if((h=typeof i)=="object"&&i.nodeType)e.push(i);else if(Array.isArray(i))n=se(e,i,u)||n;else if(h==="function")if(s){for(;typeof i=="function";)i=i();n=se(e,Array.isArray(i)?i:[i],Array.isArray(u)?u:[u])||n}else e.push(i),n=!0;else{const v=String(i);u&&u.nodeType===3&&u.data===v?e.push(u):e.push(document.createTextNode(v))}}return n}function Ee(e,t,r=null){for(let s=0,n=t.length;s<n;s++)e.insertBefore(t[s],r)}function V(e,t,r,s){if(r===void 0)return e.textContent="";const n=s||document.createTextNode("");if(t.length){let a=!1;for(let l=t.length-1;l>=0;l--){const i=t[l];if(n!==i){const u=i.parentNode===e;!a&&!l?u?e.replaceChild(n,i):e.insertBefore(n,r):u&&i.remove()}else a=!0}}else e.insertBefore(n,r);return[n]}var Y=new Map;function O(e){return Y.has(e)||Y.set(e,{}),Y.get(e)}function vt(e,t){t=t.toLowerCase();var r;return t[0]==="w"&&(r=yt(e,t)),t[0]==="p"&&(r=gt(e,t)),t[0]==="n"&&(r=bt(e,t)),r||(r=dt(e,t)),r}function dt(e,t){var r=e.createOscillator();return r.type=t[0]==="t"?"triangle":pt[t.substr(0,2)]||"sine",r}var pt={si:"sine",sq:"square",sa:"sawtooth",tr:"triangle"};function gt(e,t){var r=Math.round(parseInt(t.substr(1))||50);r=Math.min(Math.max(r,1),99);var s=e.createOscillator();s.type="sawtooth";var n=e.createWaveShaper();return n.curve=wt(r),s.connect(n),{start:a=>s.start(a),frequency:s.frequency,connect:a=>n.connect(a),disconnect:()=>{n.disconnect(),s.disconnect(),s.stop()},input:s}}function wt(e){var t=256;if(Z[e])return Z[e];for(var r=new Float32Array(t),s=t*e/100,n=0;n<t;n++)r[n]=n<s?1:-1;return Z[e]=r}var Z={};function yt(e,t){var r=e.createOscillator();return t.length<2&&(t+="9"),r.setPeriodicWave(mt(e,t)),r}function mt(e,t){var r=O(e);r.periodicWaves||(r.periodicWaves={});var s=r.periodicWaves;if(!s[t]){for(var n=new Float32Array(t.length),a=new Float32Array(t.length),l=1;l<t.length;++l){var i=parseFloat(t[l])/9;n[l]=i*i}s[t]=e.createPeriodicWave(a,n)}return s[t]}function bt(e,t){var r=O(e);r.noiseBuffers||(r.noiseBuffers={});var s=r.noiseBuffers,n=e.createBufferSource(),a=Tt[t]||"n0";return s[a]||(s[a]=At(e,a)),n.buffer=s[a],n.loop=!0,n}var Tt={n0:"n0",n1:"n1",np:"np",nb:"nb"};function At(e,t){var r={n0:1,n1:1.5,nb:1.5,np:1.5}[t],s=r*e.sampleRate|0,n=e.createBuffer(1,s,e.sampleRate),a=n.getChannelData(0);return t==="n0"&&Et(a),t==="nb"&&_t(a),t==="np"&&St(a),t==="n1"&&Mt(a),n}function Et(e){for(var t=0;t<e.length;t++)e[t]=2*Math.random()-1}function St(e){var t=0,r=0,s=0,n=0,a=0,l=0,i=0,u=0;e.forEach((h,v)=>{var o=2*Math.random()-1;t=.99886*t+o*.0555179,r=.99332*r+o*.0750759,s=.969*s+o*.153852,n=.8665*n+o*.3104856,a=.55*a+o*.5329522,l=-.7616*l-o*.016898,e[v]=t+r+s+n+a+l+i+o*.5362,i=o*.115926,u=Math.max(u,Math.abs(e[v]))}),e.forEach((h,v)=>{e[v]/=u})}function _t(e){for(var t=0,r=0,s=0;s<e.length;s++){var n=2*Math.random()-1;t=(t+n*.02)/1.02,r=Math.max(r,Math.abs(t)),e[s]=t}e.forEach((a,l)=>{e[l]/=r})}function Mt(e){for(var t=Se(1),r=0,s=0;s<24;s++){t=Se(t);var n=1+s%16,a=2+t*10,l=Pt(e,n,a,1/4);r=Math.max(r,l)}e.forEach((i,u)=>{e[u]/=r})}var Pt=(e,t,r,s)=>{for(var n=0,a=2*Math.PI*440/44100,l=Math.random()*2*Math.PI,i=Math.random()*2*Math.PI,u=0;u<e.length;u++){var h=u*a,v=_e(l+t*h),o=_e(i+r*h);e[u]+=v*o*s,n=Math.max(n,Math.abs(e[u]))}return n};function Se(e){return e=(e+Math.sqrt(17))*Math.sqrt(23),e-Math.floor(e)}var _e=(()=>{for(var e=[],t=512/(2*Math.PI),r=0;r<512;r++)e[r]=Math.sin(r/t);return s=>e[s*t&511]})();function kt(e){return/^shape/i.test(e)}function Ue(e,t){var r=t.split("-"),s=r[1],n=parseFloat(r[2]);isNaN(n)&&(n=5),M[s]||(console.warn("unknown curve type: "+s),s="linear",n=5);var a=s+"-"+n;ee[a]||(ee[a]=M[s](n));var l=ee[a],i=e.createWaveShaper();return i.curve=l,i}var ee={},M={};M.linear=e=>new Float32Array([-1,1]);M.clip=e=>{var t=e/10;return new Float32Array([-t,-t,0,t,t])};M.tanh=e=>{for(var t=.5*X(1,e,40),r=255,s=new Float32Array(r),n=0;n<s.length;n++){var a=2*(n/(r-1))-1;s[n]=Math.tanh(a*t)}return s};M.boost=e=>{for(var t=Math.ceil(e/2),r=new Float32Array(2*t+1),s=0;s<r.length;s++)r[s]=s<t?-1:s===t?0:1;return r};M.fold=e=>{var t=e/10;return new Float32Array([0,-t,0,t,0])};M.crush=e=>{e=X(1,e,40);for(var t=e,r=255,s=new Float32Array(r),n=0;n<r;n++){var a=2*(n/(r-1))-1;s[n]=Math.round(a*(t+.4999))/t,Math.abs(s[n])<.001&&(s[n]=0)}return s};M.thin=e=>{var t=1+e/2;t=X(1.5,t,20);for(var r=255,s=new Float32Array(r),n=0;n<r;n++){var a=2*(n/(r-1))-1;a>0?s[n]=G(0,1,a,t):s[n]=G(0,-1,-a,t)}return s};M.fat=e=>{var t=1-e/9;t=X(.05,t,.95);for(var r=255,s=new Float32Array(r),n=0;n<r;n++){var a=2*(n/(r-1))-1;a>0?s[n]=G(0,1,a,t):s[n]=G(0,-1,-a,t)}return s};function G(e,t,r,s){return e+(t-e)*Math.pow(r,s)}function X(e,t,r){return t<e?e:t>r?r:t}var He="bit-crusher";function Nt(e){return/^crush/i.test(e)}function Vt(e,t){ae(e);var r=t.split("-"),s=parseInt(r[1]),n=parseFloat(r[2])||.2;s===0&&(s=1),s||(s=5);var a=O(e);if(a.crush_worklet_state!=="ok")return Ue(e,`shape-crush-${s}`);var l=new AudioWorkletNode(e,He);return l.parameters.get("depth").value=s,l.parameters.get("freq").value=n,l.isWorklet=!0,l}function ae(e){var t=O(e);t.crush_worklet_state||(t.crush_worklet_state="trying",Rt(e,He).then(r=>{t.crush_worklet_state=r?"ok":"ng"}))}function Ct(){class e extends AudioWorkletProcessor{constructor(){super(),this.phase=0,this.sample=0}static get parameterDescriptors(){return[{name:"depth",defaultValue:5,minValue:1,maxValue:20},{name:"freq",defaultValue:.2,minValue:.01,maxValue:1}]}process(r,s,n){for(var a=r[0],l=s[0],i=n.depth[0],u=n.freq[0],h=i+.4999,v=1/i,o=this.phase,d=this.sample,f=0;f<a.length;f++)for(var c=a[f],g=l[f],w=0;w<c.length;w++)o+=u,o>=1&&(o-=1,d=Math.round(c[w]*h)*v),g[w]=d;return this.phase=o,this.sample=d,!0}}registerProcessor("MODULE_NAME",e)}async function Rt(e,t){if(!e.audioWorklet)return!1;var r=Ct.toString().replace("MODULE_NAME",t),s=`(${r})()`;try{e.startRendering||await e.resume();var n=new Blob([s],{type:"application/javascript"}),a=URL.createObjectURL(n);await e.audioWorklet.addModule(a)}catch{return!1}return!0}function qt(e){var t=e.substr(0,2);return!!ie[t]}function It(e,t){var r=e.createBiquadFilter(),s=t.substr(0,2),n=t.substr(0,5);return r.type=ie[n]||ie[s]||"allpass",r}var ie={pe:"peaking",ba:"bandpass",no:"notch",al:"allpass",lo:"lowpass",hi:"highpass",lowsh:"lowshelf",highs:"highshelf"};function Me(e,t){return Nt(t)?Vt(e,t):kt(t)?Ue(e,t):qt(t)?It(e,t):null}class Qe{constructor(t){this.ctx=t,this.zeroRampTarget=.001}initParam(t,r){t.cancelScheduledValues(0),t.__paramEnveloperEvents=[new C(R,r,r,0,0)],t.setValueAtTime(r,0)}startEnvelope(t,r){var s=this.ctx.currentTime;r>s||(r=s);var n=t.__paramEnveloperEvents,a=n[n.length-1];if(Ot(n,s),n.length===0||r>a.t1){var l=a.v1;n.push(new C(R,l,l,0,r)),t.setValueAtTime(l,r);return}var i=Pe(n,r);if(!i)throw"event list conformance bug, should not happen!";if(n.length=n.indexOf(i)+1,r===i.t1){t.cancelScheduledValues(r+1e-4),xt("start:  envelope begins: value",a.v1);return}t.cancelScheduledValues(r);var u=ke(i,r);i.v1=u,i.t1=r,i.type===R?t.setValueAtTime(u,r):i.type===oe?t.linearRampToValueAtTime(u,r):i.type===ue?(u=u||this.zeroRampTarget,t.exponentialRampToValueAtTime(u,r)):i.type===le&&t.setValueAtTime(u,r)}addHold(t,r){if(r>0){var s=t.__paramEnveloperEvents,n=s[s.length-1];if(n.t1===1/0){var a=n.t0+r;this.startEnvelope(t,a)}else{var l=n.v1,i=n.t1,u=l,h=i+r;s.push(new C(R,l,u,i,h)),t.setValueAtTime(u,h)}}}addRamp(t,r,s,n){var a=1e-4;r>a||(r=a);var l=t.__paramEnveloperEvents,i=l[l.length-1],u=i.v1,h=i.t1;if(i.t1===1/0)throw"Error - change scheduled after a sweep with infinite duration";var v=s,o=h+r;n?(u=u||this.zeroRampTarget,v=v||this.zeroRampTarget,t.exponentialRampToValueAtTime(v,o)):t.linearRampToValueAtTime(v,o);var d=n?ue:oe;l.push(new C(d,u,v,h,o))}addSweep(t,r,s,n){var a=t.__paramEnveloperEvents,l=a[a.length-1],i=l.v1,u=l.t1;if(l.t1===1/0)throw"Error - change scheduled after a sweep with infinite duration";t.setTargetAtTime(s,u,n);var h,v;r>0?(h=u+r,v=je(r,i,s,n)):(h=1/0,v=s);var o=new C(le,i,v,u,h);o.k=n,o.tgt=s,a.push(o)}getValueAtTime(t,r){var s=t.__paramEnveloperEvents,n=Pe(s,r);return n?ke(n,r):s[s.length-1].v1}}var R=1,le=2,oe=3,ue=4;function C(e,t,r,s,n){this.type=e,this.v0=+t,this.v1=+r,this.t0=+s,this.t1=+n,this.k=.1,this.tgt=.1}function Ot(e,t){for(;e.length>0&&e[0].t1<t;)e.shift()}function Pe(e,t){for(var r=0;r<e.length;r++)if(!(t>e[r].t1))return e[r];return null}function ke(e,t){if(e.type===R)return e.v0;var r=t-e.t0;if(e.type===oe)return $t(r,e.v0,e.v1,e.t1-e.t0);if(e.type===ue)return Dt(r,e.v0,e.v1,e.t1-e.t0);if(e.type===le)return je(r,e.v0,e.tgt,e.k)}function je(e,t,r,s){return r+(t-r)*Math.exp(-e/s)}function $t(e,t,r,s){return t+(r-t)*e/s}function Dt(e,t,r,s){return t*Math.pow(r/t,e/s)}var xt=()=>{},te=1e-4;function re(e,t,r,s,n,a,l,i,u){F("PARAM: ",l,"time",n,"needsEnv="+u,"now",e.currentTime);var h=O(e);h.paramEnveloper||(h.paramEnveloper=new Qe(e));var v=h.paramEnveloper;if(typeof a=="function"&&(a=a()),fe(a)&&!u){t.setValueAtTime(a,0);return}var o=Array.isArray(a)?a:[a],d=l==="freq"?s:1;l==="gain"&&i==="freq"&&(d=s);var f={enveloper:v,type:l,envStarted:!1,attackRampNeeded:!!u,currValue:d,startTime:n,sweeping:!1,releaseTime:-1,releaseTarget:l==="freq"?-1:0},c=ce(e,r,o,s,n,l);if(o.forEach(p=>{typeof p=="function"&&(p=p()),fe(p)&&(p=l==="freq"?{t:0,f:p}:{t:p}),typeof p=="object"&&(p.type||Ne(t,p,f,s))}),f.attackRampNeeded){var g={a:K.a};Ne(t,g,f,s)}if(f.releaseTarget<0&&(f.releaseTarget=f.currValue),f.envStarted||(F("- no schedules, init to:",f.currValue),v.initParam(t,f.currValue)),u&&f.releaseTime<0&&(f.releaseTime=K.r),f.releaseTime>=0&&(r.envelopes.push({param:t,releaseTime:f.releaseTime,releaseTarget:f.releaseTarget,rootEnvelope:!!u}),F("- stored release:",f.releaseTime,"target",f.releaseTarget)),l==="freq"&&(i==="root"||i==="freq")){var w=f.currValue/s;w!==0&&r.bendables.push({param:t,mult:w})}return f=null,c}function fe(e){return typeof e!="number"?!1:!isNaN(e)}function _(e,t,r,s){return typeof s<"u"&&(e=s),typeof e=="function"&&(e=e()),fe(e)?r?e:e<0?t:e:t}function Ne(e,t,r,s){var n=_(t.w,0,!1),a=_(t.a,-1,!1),l=_(t.h,-1,!1),i=_(t.s,1,!1,t.p),u=_(t.x,1,!1)|0,h=_(t.k,0,!0);if(a>=0&&a<te&&(a=te),r.attackRampNeeded&&a<0){var v=l>0||i!==1;v&&(a=K.a)}var o=r.currValue||1;if(h!==0){var d=Math.pow(s/261.625,h);o*=d}n===0&&(u=1),u>1&&a<0&&(c!==1||g!==0)&&(a=te);var f=r.startTime,c=_(t.t,1,!1),g=_(t.f,0,!0),w=_(t.d,-1,!1,t.q),p=_(t.r,-1,!1),y=_(t.z,-1,!1),m=_(t.dr,-1,!0);m>=0&&(w=p=m),w<=0&&(w=K.d);for(var E=Math.max(u,1),S=0;S<E;S++){n>0&&(D(r,e,o),$(r,e,n),f+=n,(c!==1||g!==0)&&a<0&&(a=0)),a>=0&&D(r,e,o),S>0&&(o=r.enveloper.getValueAtTime(e,f)),o=o*c+g;var be=80;r.type==="freq"&&o<be&&g<0&&(o=2*be-o,g=-g),a>=0&&(r.sweeping&&$(r,e,0),r.enveloper.addRamp(e,a,o),r.attackRampNeeded=!1,f+=a||0),l>0&&(D(r,e,o),$(r,e,l),f+=l),i!==1&&(D(r,e,o),o*=i,r.sweeping&&$(r,e,0),r.enveloper.addSweep(e,-1,o,w),r.sweeping=!0)}r.currValue=o,p>=0&&(r.releaseTime=p),y>=0&&(r.releaseTarget=r.currValue*y)}function $(e,t,r){e.enveloper.addHold(t,r||0),e.sweeping=!1}function D(e,t,r){e.envStarted||(e.attackRampNeeded&&(r=0),e.enveloper.initParam(t,r),e.enveloper.startEnvelope(t,e.startTime),e.envStarted=!0,F("- initted param:",r,"time",e.startTime))}var K={w:0,t:1,f:0,k:0,a:.05,h:0,d:.1,s:1,r:.1,z:-1,x:1},F=()=>{};function ce(e,t,r,s,n,a){for(var l=Ve(r),i=[],u=0;u<l.length;u++){var h=l[u];if(typeof h=="function"&&(h=h()),typeof h=="string"&&(h={type:h}),typeof h=="object"&&!(typeof h.type>"u")){var v=h.type;typeof v=="function"&&(v=v()),v||(v="sine");var o=null,d=null;o=Me(e,v),d=o||vt(e,v),d.start&&d.start(n),t.nodes.push(d);var f=null,c=!o&&a==="root",g=c||h.gain||!o&&a==="freq";if(g&&(f=e.createGain(),t.nodes.push(f)),Ce(e,t,d,h,s,n,a,f,c),!o&&h.effect)for(var w=Ve(h.effect),p=0;p<w.length;p++){var y=w[p];if(typeof y=="function"&&(y=y()),typeof y=="string"&&(y={type:y}),typeof y=="object"){var m=Me(e,y.type);m&&(Ce(e,t,m,y,s,n,a,null,!1),t.nodes.push(m),d.connect(m),d=m)}}f&&(d.connect(f),d=f),o?(i.forEach(S=>S.connect(d)),i=[d]):i.push(d)}}if(i.length===0)return null;if(i.length===1)return i.pop();var E=e.createGain();return t.nodes.push(E),i.forEach(S=>S.connect(E)),E}function Ve(e){return typeof e=="function"&&(e=e()),Array.isArray(e)?e:[e]}function Ce(e,t,r,s,n,a,l,i,u){if(r.Q&&s.Q){var h=re(e,r.Q,t,n,a,s.Q,"Q",l,!1);h&&h.connect(r.Q)}if(r.frequency||r.playbackRate){var v=r.frequency||r.playbackRate,o=r.playbackRate?n/440:n,d=s.freq||{},f=re(e,v,t,o,a,d,"freq",l,!1);f&&f.connect(v)}var c=i?i.gain:r.gain||null;if(c){var g=re(e,c,t,n,a,s.gain,"gain",l,u);g&&g.connect(c)}}function Re(e){var t={},r=[],s=new Qe(e);this.maxVoices=32,this.play=function(f,c,g,w,p,y){a(),n(this.maxVoices-1);var m=h(f,c,g,w,y);return r.push(m.id),t[m.id]=m,p&&o(m,p),m.id},this.bend=function(f,c,g,w){var p=t[f];p&&v(p,c,g,w)},this.release=function(f,c){var g=t[f];g&&o(g,c)},this.isPlaying=function(f){return!!t[f]},this.releaseAll=function(f){r.forEach(c=>{o(t[c],f)})},this.dispose=function(){n(0),t=null,r=null,clearInterval(l)};function n(f){for(;r.length>f;){var c=r.shift();d(t[c]),delete t[c]}}function a(){for(var f=e.currentTime,c=0;c<r.length;c++){var g=r[c],w=t[g];w.endTime===0||f<w.endTime||(d(w),delete t[g],r.splice(c,1),c--)}}var l=setInterval(a,800);function i(f){++u>9999&&(u=1),this.id=u,this.time=+f,this.endTime=0,this.nodes=[],this.envelopes=[],this.bendables=[]}var u=0;function h(f,c,g,w,p){var y=new i(w),m=ce(e,y,f,c,w,"root");if(!m){var E={type:"sine"};m=ce(e,y,E,c,w,"root")}if(g===1)m.connect(p);else{var S=e.createGain();y.nodes.push(S),S.gain.value=g<1?g*g:g,m.connect(S),S.connect(p)}return y}function v(f,c,g,w){f.endTime>0||f.bendables.forEach(p=>{var y=c*p.mult;p.param.cancelScheduledValues(w),p.param.setTargetAtTime(y,w,g)})}function o(f,c){f.endTime>0||(f.endTime=c,f.envelopes.forEach((g,w)=>{var p=g.releaseTime;if(p>=0){var y=g.param;s.startEnvelope(y,c);var m=g.releaseTarget||0;if(s.addSweep(y,-1,m,p),g.rootEnvelope){var E=c+4*p;f.endTime=Math.max(f.endTime,E)}}}))}function d(f){for(;f.nodes.length>0;){var c=f.nodes.pop();c.stop&&c.stop(),c.buffer&&(c.buffer=null),c.gain&&c.gain.cancelScheduledValues(0),c.frequency&&c.frequency.cancelScheduledValues(0),c.playbackRate&&c.playbackRate.cancelScheduledValues(0),c.Q&&c.Q.cancelScheduledValues(0),c.disconnect(),c=null}f.nodes=null,f.envelopes=null,f.bendables=null}}const Bt="wasgen",Lt="0.18.4",Ft="Web Audio Sound Generator",Wt="src/index.js",Ut="dist/src/index.d.ts",Ht=["/src","/dist"],Qt={start:"cd demo && webpack serve",types:"tsc",build:"tsc; cd demo && webpack --env prod"},jt="andy@fenomas.com",Gt="ISC",Kt="github:fenomas/wasgen",zt={"param-enveloper":"^0.3.0"},Xt={"audiobuffer-to-wav":"^1.0.0","webaudio-viz":"0.2.0"},Jt={name:Bt,version:Lt,description:Ft,main:Wt,typings:Ut,files:Ht,scripts:Qt,author:jt,license:Gt,repository:Kt,dependencies:zt,devDependencies:Xt};var Yt=Jt.version;function Zt(e=null,t=null,r=!1,s=!1){this.version=Yt,s||console.log(`wasgen     v${this.version}`);var n=e||new(window.AudioContext||window.webkitAudioContext),a=new Re(n),l=()=>{n.startRendering||(n.state!=="running"&&n.resume(),ae(n))},i=t||n.destination;n.startRendering&&ae(n);var u=()=>n.currentTime+.05;this.play=function(o,d=440,f=1,c=0,g=0,w=null){l(),d=d||440,f=f||1,c>0||(c=u()),g=g||0,w=w||v||i;var p=a.play(o,d,f,c,g,w);return p},this.bend=function(o,d=440,f=.1,c=0){d=d||440,f=f||.1,c=c||u(),a.bend(o,d,f,c)},this.release=function(o,d=0){d=d||u(),a.release(o,d)},this.noteIsPlaying=function(o){return a.isPlaying(o)},this.releaseAll=function(o=0){o=o||u(),a.releaseAll(o)},this.compressor=null,this.now=function(){return n.currentTime},this.maxVoices=function(o=32){return o&&(a.maxVoices=o),a.maxVoices},this.destination=function(o){return o&&(i=o,h()),i},this.audioContext=function(o){return o&&(this.dispose(),n=o,a=new Re(n),i=n.destination,h()),n};var h=()=>{v&&v.disconnect(),!r&&(v=n.createDynamicsCompressor(),v.threshold.value=-24,v.knee.value=25,v.ratio.value=20,v.attack.value=.003,v.release.value=.25,v.connect(i),this.compressor=v)},v=null;h(),this.dispose=function(){a.dispose(),a=null,v&&v.disconnect(),v=null,i=null,n=null}}var ge={},we={},ye={},me={};Object.defineProperty(me,"__esModule",{value:!0});class er{constructor(t){this.comparator=t.comparator,this.data=t.initialValues?t.initialValues.slice(0):[],this._heapify()}_heapify(){if(this.data.length>0)for(let t=0;t<this.data.length;t++)this._bubbleUp(t)}queue(t){this.data.push(t),this._bubbleUp(this.data.length-1)}dequeue(){const t=this.data[0],r=this.data.pop();return this.data.length>0&&r!==void 0&&(this.data[0]=r,this._bubbleDown(0)),t}peek(){return this.data[0]}clear(){this.data.length=0}_bubbleUp(t){for(;t>0;){const r=t-1>>>1;if(this.comparator(this.data[t],this.data[r])<0){const s=this.data[r];this.data[r]=this.data[t],this.data[t]=s,t=r}else break}}_bubbleDown(t){let r=this.data.length-1;for(;;){const s=(t<<1)+1,n=s+1;let a=t;if(s<=r&&this.comparator(this.data[s],this.data[a])<0&&(a=s),n<=r&&this.comparator(this.data[n],this.data[a])<0&&(a=n),a!==t){const l=this.data[a];this.data[a]=this.data[t],this.data[t]=l,t=a}else break}}}me.default=er;Object.defineProperty(ye,"__esModule",{value:!0});const tr=me;class rr{constructor(t){this._length=0,this._length=t.initialValues?t.initialValues.length:0,this.strategy=new tr.default(t)}get length(){return this._length}queue(t){this._length++,this.strategy.queue(t)}dequeue(){if(!this._length)throw new Error("Empty queue");return this._length--,this.strategy.dequeue()}peek(){if(!this._length)throw new Error("Empty queue");return this.strategy.peek()}clear(){this._length=0,this.strategy.clear()}}ye.default=rr;Object.defineProperty(we,"__esModule",{value:!0});const nr=ye;we.default=nr.default;Object.defineProperty(ge,"__esModule",{value:!0});var Ge=ge.Pathfinder=void 0;const sr=we,qe=(e,t,r=0,s=0,n=!0)=>({node:e,previous:t,f:r,g:s,open:n});class ar{methods;maxIterations=1e6;constructor(t={}){this.methods={nodeToPrimitive:r=>r,getNeighbors:()=>[],getMoveCost:()=>1,getHeuristic:()=>1,...t}}findPath(t,r){const s=this.methods.nodeToPrimitive(t),n=this.methods.nodeToPrimitive(r),a=new sr.default({comparator:(d,f)=>d.f-f.f}),l={},i=qe(t,null,0,0,!0);a.queue(i),l[s]=i;let u=0;for(;a.length>0;){if(u++>this.maxIterations)throw new Error("Infinite loop!");const d=a.dequeue();if(!d.open)continue;if(this.methods.nodeToPrimitive(d.node)===n)break;d.open=!1,this.methods.getNeighbors(d.node).forEach(c=>{const g=this.methods.getMoveCost(d.node,c);if(g<0)return;const w=this.methods.nodeToPrimitive(c),p=l[w],y=d.g+g;if(p&&p.g<=y)return;const m=this.methods.getHeuristic(c,r);if(p)p.open=!0,p.g=y,p.f=y+m,p.previous=d,a.queue(p);else{const E=qe(c,d,y+m,y,!0);l[w]=E,a.queue(E)}})}a.clear();const h=l[n];if(!h)return[];const v=[h.node];let o=h;for(;o.previous;)v.push(o.previous.node),o=o.previous;return v.reverse()}}Ge=ge.Pathfinder=ar;const ir={type:"sine",freq:{type:"triangle",gain:{t:3,a:.01,h:.01,d:.7,s:.1,r:.05,k:-1.2}},gain:{t:.4,a:.005,h:.01,d:.7,s:0}},lr={type:"triangle",freq:{type:"triangle",freq:{t:3},gain:{t:4,a:.01,h:.01,d:.4,s:.1,r:.05,k:-1}},gain:{t:.4,a:.005,h:.01,d:.7,s:0}},Ke=e=>Math.pow(2,(e-69)/12)*440,W=(e=0,t=1)=>e+Math.random()*(t-e+1)|0;let x=0;const ze=[0,2,4,5,7,9,11],or=(e=0)=>[e,e+2,e+4].map(t=>ze[t%7]),Xe=.4,Je=.5,he=(e=0)=>ze.includes(e%12),Ie=e=>{const t=e.now()+.05,r=t+Xe*3,s=[1,5,6,4],n=[60,48,60,60],a=or(s[x%4]-1).map(l=>l+n[x%4]);a.push(a[0]-12),a.forEach(l=>{e.play(ir,Ke(l),Je,t,r)}),x=(x+1)%4},ur=new Ge({getNeighbors:e=>[0,0,0,0].map(()=>e+W(-3,3)),getHeuristic:(e,t)=>5+Math.abs(e-t)+W(0,3),getMoveCost:(e,t)=>Math.abs(e-t)+W(1,2)+(he(t)?1:2)});console.log("finder");let P=72;const fr=e=>{let t=P+W(-6,6);t===P&&t++,he(t)||t++,Math.abs(t-P)>8&&(t+=t>P?-12:12);const r=ur.findPath(P,t);dr(`[${r.join(", ")}]`);let s=Xe*2;r.length>2&&(s/=2),r.length>4&&(s/=2);let n=e.now()+.05;r.forEach((a,l)=>{e.play(lr,Ke(a),Je,n,n+s),n+=s}),P=(72+t)/2|0,he(P)||P++};var cr=We("<div><button></button><br><br><pre>Path: ");const[B,hr]=ve(null),[Ye,Oe]=ve(!1),[vr,dr]=ve(""),L=[],pr=()=>{B()||hr(new Zt),Ye()?(clearInterval(L.pop()),clearInterval(L.pop()),Oe(!1)):(Ie(B()),L.push(setInterval(()=>Ie(B()),1600)),L.push(setInterval(()=>fr(B()),1600)),Oe(!0))},gr=()=>(()=>{var e=cr(),t=e.firstChild,r=t.nextSibling,s=r.nextSibling,n=s.nextSibling;return n.firstChild,t.$$click=pr,Q(t,()=>Ye()?"Stop":"Start"),n.style.setProperty("font-size","200%"),Q(n,vr,null),e})();ct(["click"]);var wr=We("<main><h2>A* Music Demo!");const yr=document.getElementById("root");ft(()=>(()=>{var e=wr();return e.firstChild,Q(e,ot(gr,{}),null),e})(),yr);
//# sourceMappingURL=index-Dq-DmDWO.js.map

(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}})();const st=(e,t)=>e===t,Ae={equals:st};let at=Ue;const k=1,W=2,xe={owned:null,cleanups:null,context:null,owner:null};var E=null;let J=null,it=null,b=null,T=null,N=null,z=0;function lt(e,t){const r=b,s=E,n=e.length===0,a=t===void 0?s:t,l=n?xe:{owned:null,cleanups:null,context:a?a.context:null,owner:a},i=n?e:()=>e(()=>pe(()=>O(l)));E=l,b=null;try{return I(i,!0)}finally{b=r,E=s}}function Le(e,t){t=t?Object.assign({},Ae,t):Ae;const r={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},s=n=>(typeof n=="function"&&(n=n(r.value)),Fe(r,n));return[ot.bind(r),s]}function ae(e,t,r){const s=ct(e,t,!1,k);ge(s)}function pe(e){if(b===null)return e();const t=b;b=null;try{return e()}finally{b=t}}function ot(){if(this.sources&&this.state)if(this.state===k)ge(this);else{const e=T;T=null,I(()=>U(this),!1),T=e}if(b){const e=this.observers?this.observers.length:0;b.sources?(b.sources.push(this),b.sourceSlots.push(e)):(b.sources=[this],b.sourceSlots=[e]),this.observers?(this.observers.push(b),this.observerSlots.push(b.sources.length-1)):(this.observers=[b],this.observerSlots=[b.sources.length-1])}return this.value}function Fe(e,t,r){let s=e.value;return(!e.comparator||!e.comparator(s,t))&&(e.value=t,e.observers&&e.observers.length&&I(()=>{for(let n=0;n<e.observers.length;n+=1){const a=e.observers[n],l=J&&J.running;l&&J.disposed.has(a),(l?!a.tState:!a.state)&&(a.pure?T.push(a):N.push(a),a.observers&&He(a)),l||(a.state=k)}if(T.length>1e6)throw T=[],new Error},!1)),t}function ge(e){if(!e.fn)return;O(e);const t=z;ut(e,e.value,t)}function ut(e,t,r){let s;const n=E,a=b;b=E=e;try{s=e.fn(t)}catch(l){return e.pure&&(e.state=k,e.owned&&e.owned.forEach(O),e.owned=null),e.updatedAt=r+1,Qe(l)}finally{b=a,E=n}(!e.updatedAt||e.updatedAt<=r)&&(e.updatedAt!=null&&"observers"in e?Fe(e,s):e.value=s,e.updatedAt=r)}function ct(e,t,r,s=k,n){const a={fn:e,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:E,context:E?E.context:null,pure:r};return E===null||E!==xe&&(E.owned?E.owned.push(a):E.owned=[a]),a}function We(e){if(e.state===0)return;if(e.state===W)return U(e);if(e.suspense&&pe(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<z);)e.state&&t.push(e);for(let r=t.length-1;r>=0;r--)if(e=t[r],e.state===k)ge(e);else if(e.state===W){const s=T;T=null,I(()=>U(e,t[0]),!1),T=s}}function I(e,t){if(T)return e();let r=!1;t||(T=[]),N?r=!0:N=[],z++;try{const s=e();return ft(r),s}catch(s){r||(N=null),T=null,Qe(s)}}function ft(e){if(T&&(Ue(T),T=null),e)return;const t=N;N=null,t.length&&I(()=>at(t),!1)}function Ue(e){for(let t=0;t<e.length;t++)We(e[t])}function U(e,t){e.state=0;for(let r=0;r<e.sources.length;r+=1){const s=e.sources[r];if(s.sources){const n=s.state;n===k?s!==t&&(!s.updatedAt||s.updatedAt<z)&&We(s):n===W&&U(s,t)}}}function He(e){for(let t=0;t<e.observers.length;t+=1){const r=e.observers[t];r.state||(r.state=W,r.pure?T.push(r):N.push(r),r.observers&&He(r))}}function O(e){let t;if(e.sources)for(;e.sources.length;){const r=e.sources.pop(),s=e.sourceSlots.pop(),n=r.observers;if(n&&n.length){const a=n.pop(),l=r.observerSlots.pop();s<n.length&&(a.sourceSlots[l]=s,n[s]=a,r.observerSlots[s]=l)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)O(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)O(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function ht(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Qe(e,t=E){throw ht(e)}function vt(e,t){return pe(()=>e(t||{}))}function dt(e,t,r){let s=r.length,n=t.length,a=s,l=0,i=0,u=t[n-1].nextSibling,h=null;for(;l<n||i<a;){if(t[l]===r[i]){l++,i++;continue}for(;t[n-1]===r[a-1];)n--,a--;if(n===l){const v=a<s?i?r[i-1].nextSibling:r[a-i]:u;for(;i<a;)e.insertBefore(r[i++],v)}else if(a===i)for(;l<n;)(!h||!h.has(t[l]))&&t[l].remove(),l++;else if(t[l]===r[a-1]&&r[i]===t[n-1]){const v=t[--n].nextSibling;e.insertBefore(r[i++],t[l++].nextSibling),e.insertBefore(r[--a],v),t[n]=r[a]}else{if(!h){h=new Map;let o=i;for(;o<a;)h.set(r[o],o++)}const v=h.get(t[l]);if(v!=null)if(i<v&&v<a){let o=l,d=1,c;for(;++o<n&&o<a&&!((c=h.get(t[o]))==null||c!==v+d);)d++;if(d>v-i){const f=t[l];for(;i<v;)e.insertBefore(r[i++],f)}else e.replaceChild(r[i++],t[l++])}else l++;else t[l++].remove()}}}const Se="_$DX_DELEGATE";function pt(e,t,r,s={}){let n;return lt(a=>{n=a,t===document?e():H(t,e(),t.firstChild?null:void 0,r)},s.owner),()=>{n(),t.textContent=""}}function je(e,t,r){let s;const n=()=>{const l=document.createElement("template");return l.innerHTML=e,l.content.firstChild},a=()=>(s||(s=n())).cloneNode(!0);return a.cloneNode=a,a}function gt(e,t=window.document){const r=t[Se]||(t[Se]=new Set);for(let s=0,n=e.length;s<n;s++){const a=e[s];r.has(a)||(r.add(a),t.addEventListener(a,wt))}}function H(e,t,r,s){if(r!==void 0&&!s&&(s=[]),typeof t!="function")return Q(e,t,s,r);ae(n=>Q(e,t(),n,r),s)}function wt(e){let t=e.target;const r=`$$${e.type}`,s=e.target,n=e.currentTarget,a=u=>Object.defineProperty(e,"target",{configurable:!0,value:u}),l=()=>{const u=t[r];if(u&&!t.disabled){const h=t[`${r}Data`];if(h!==void 0?u.call(t,h,e):u.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&a(t.host),!0},i=()=>{for(;l()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const u=e.composedPath();a(u[0]);for(let h=0;h<u.length-2&&(t=u[h],!!l());h++){if(t._$host){t=t._$host,i();break}if(t.parentNode===n)break}}else i();a(s)}function Q(e,t,r,s,n){for(;typeof r=="function";)r=r();if(t===r)return r;const a=typeof t,l=s!==void 0;if(e=l&&r[0]&&r[0].parentNode||e,a==="string"||a==="number"){if(a==="number"&&(t=t.toString(),t===r))return r;if(l){let i=r[0];i&&i.nodeType===3?i.data!==t&&(i.data=t):i=document.createTextNode(t),r=V(e,r,s,i)}else r!==""&&typeof r=="string"?r=e.firstChild.data=t:r=e.textContent=t}else if(t==null||a==="boolean")r=V(e,r,s);else{if(a==="function")return ae(()=>{let i=t();for(;typeof i=="function";)i=i();r=Q(e,i,r,s)}),()=>r;if(Array.isArray(t)){const i=[],u=r&&Array.isArray(r);if(ie(i,t,r,n))return ae(()=>r=Q(e,i,r,s,!0)),()=>r;if(i.length===0){if(r=V(e,r,s),l)return r}else u?r.length===0?_e(e,i,s):dt(e,r,i):(r&&V(e),_e(e,i));r=i}else if(t.nodeType){if(Array.isArray(r)){if(l)return r=V(e,r,s,t);V(e,r,null,t)}else r==null||r===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);r=t}}return r}function ie(e,t,r,s){let n=!1;for(let a=0,l=t.length;a<l;a++){let i=t[a],u=r&&r[e.length],h;if(!(i==null||i===!0||i===!1))if((h=typeof i)=="object"&&i.nodeType)e.push(i);else if(Array.isArray(i))n=ie(e,i,u)||n;else if(h==="function")if(s){for(;typeof i=="function";)i=i();n=ie(e,Array.isArray(i)?i:[i],Array.isArray(u)?u:[u])||n}else e.push(i),n=!0;else{const v=String(i);u&&u.nodeType===3&&u.data===v?e.push(u):e.push(document.createTextNode(v))}}return n}function _e(e,t,r=null){for(let s=0,n=t.length;s<n;s++)e.insertBefore(t[s],r)}function V(e,t,r,s){if(r===void 0)return e.textContent="";const n=s||document.createTextNode("");if(t.length){let a=!1;for(let l=t.length-1;l>=0;l--){const i=t[l];if(n!==i){const u=i.parentNode===e;!a&&!l?u?e.replaceChild(n,i):e.insertBefore(n,r):u&&i.remove()}else a=!0}}else e.insertBefore(n,r);return[n]}var Y=new Map;function D(e){return Y.has(e)||Y.set(e,{}),Y.get(e)}function yt(e,t){t=t.toLowerCase();var r;return t[0]==="w"&&(r=At(e,t)),t[0]==="p"&&(r=Tt(e,t)),t[0]==="n"&&(r=_t(e,t)),r||(r=mt(e,t)),r}function mt(e,t){var r=e.createOscillator();return r.type=t[0]==="t"?"triangle":bt[t.substr(0,2)]||"sine",r}var bt={si:"sine",sq:"square",sa:"sawtooth",tr:"triangle"};function Tt(e,t){var r=Math.round(parseInt(t.substr(1))||50);r=Math.min(Math.max(r,1),99);var s=e.createOscillator();s.type="sawtooth";var n=e.createWaveShaper();return n.curve=Et(r),s.connect(n),{start:a=>s.start(a),frequency:s.frequency,connect:a=>n.connect(a),disconnect:()=>{n.disconnect(),s.disconnect(),s.stop()},input:s}}function Et(e){var t=256;if(Z[e])return Z[e];for(var r=new Float32Array(t),s=t*e/100,n=0;n<t;n++)r[n]=n<s?1:-1;return Z[e]=r}var Z={};function At(e,t){var r=e.createOscillator();return t.length<2&&(t+="9"),r.setPeriodicWave(St(e,t)),r}function St(e,t){var r=D(e);r.periodicWaves||(r.periodicWaves={});var s=r.periodicWaves;if(!s[t]){for(var n=new Float32Array(t.length),a=new Float32Array(t.length),l=1;l<t.length;++l){var i=parseFloat(t[l])/9;n[l]=i*i}s[t]=e.createPeriodicWave(a,n)}return s[t]}function _t(e,t){var r=D(e);r.noiseBuffers||(r.noiseBuffers={});var s=r.noiseBuffers,n=e.createBufferSource(),a=Mt[t]||"n0";return s[a]||(s[a]=Pt(e,a)),n.buffer=s[a],n.loop=!0,n}var Mt={n0:"n0",n1:"n1",np:"np",nb:"nb"};function Pt(e,t){var r={n0:1,n1:1.5,nb:1.5,np:1.5}[t],s=r*e.sampleRate|0,n=e.createBuffer(1,s,e.sampleRate),a=n.getChannelData(0);return t==="n0"&&Nt(a),t==="nb"&&Vt(a),t==="np"&&kt(a),t==="n1"&&Ct(a),n}function Nt(e){for(var t=0;t<e.length;t++)e[t]=2*Math.random()-1}function kt(e){var t=0,r=0,s=0,n=0,a=0,l=0,i=0,u=0;e.forEach((h,v)=>{var o=2*Math.random()-1;t=.99886*t+o*.0555179,r=.99332*r+o*.0750759,s=.969*s+o*.153852,n=.8665*n+o*.3104856,a=.55*a+o*.5329522,l=-.7616*l-o*.016898,e[v]=t+r+s+n+a+l+i+o*.5362,i=o*.115926,u=Math.max(u,Math.abs(e[v]))}),e.forEach((h,v)=>{e[v]/=u})}function Vt(e){for(var t=0,r=0,s=0;s<e.length;s++){var n=2*Math.random()-1;t=(t+n*.02)/1.02,r=Math.max(r,Math.abs(t)),e[s]=t}e.forEach((a,l)=>{e[l]/=r})}function Ct(e){for(var t=Me(1),r=0,s=0;s<24;s++){t=Me(t);var n=1+s%16,a=2+t*10,l=qt(e,n,a,1/4);r=Math.max(r,l)}e.forEach((i,u)=>{e[u]/=r})}var qt=(e,t,r,s)=>{for(var n=0,a=2*Math.PI*440/44100,l=Math.random()*2*Math.PI,i=Math.random()*2*Math.PI,u=0;u<e.length;u++){var h=u*a,v=Pe(l+t*h),o=Pe(i+r*h);e[u]+=v*o*s,n=Math.max(n,Math.abs(e[u]))}return n};function Me(e){return e=(e+Math.sqrt(17))*Math.sqrt(23),e-Math.floor(e)}var Pe=(()=>{for(var e=[],t=512/(2*Math.PI),r=0;r<512;r++)e[r]=Math.sin(r/t);return s=>e[s*t&511]})();function Rt(e){return/^shape/i.test(e)}function Ge(e,t){var r=t.split("-"),s=r[1],n=parseFloat(r[2]);isNaN(n)&&(n=5),P[s]||(console.warn("unknown curve type: "+s),s="linear",n=5);var a=s+"-"+n;ee[a]||(ee[a]=P[s](n));var l=ee[a],i=e.createWaveShaper();return i.curve=l,i}var ee={},P={};P.linear=e=>new Float32Array([-1,1]);P.clip=e=>{var t=e/10;return new Float32Array([-t,-t,0,t,t])};P.tanh=e=>{for(var t=.5*X(1,e,40),r=255,s=new Float32Array(r),n=0;n<s.length;n++){var a=2*(n/(r-1))-1;s[n]=Math.tanh(a*t)}return s};P.boost=e=>{for(var t=Math.ceil(e/2),r=new Float32Array(2*t+1),s=0;s<r.length;s++)r[s]=s<t?-1:s===t?0:1;return r};P.fold=e=>{var t=e/10;return new Float32Array([0,-t,0,t,0])};P.crush=e=>{e=X(1,e,40);for(var t=e,r=255,s=new Float32Array(r),n=0;n<r;n++){var a=2*(n/(r-1))-1;s[n]=Math.round(a*(t+.4999))/t,Math.abs(s[n])<.001&&(s[n]=0)}return s};P.thin=e=>{var t=1+e/2;t=X(1.5,t,20);for(var r=255,s=new Float32Array(r),n=0;n<r;n++){var a=2*(n/(r-1))-1;a>0?s[n]=j(0,1,a,t):s[n]=j(0,-1,-a,t)}return s};P.fat=e=>{var t=1-e/9;t=X(.05,t,.95);for(var r=255,s=new Float32Array(r),n=0;n<r;n++){var a=2*(n/(r-1))-1;a>0?s[n]=j(0,1,a,t):s[n]=j(0,-1,-a,t)}return s};function j(e,t,r,s){return e+(t-e)*Math.pow(r,s)}function X(e,t,r){return t<e?e:t>r?r:t}var Ke="bit-crusher";function Ot(e){return/^crush/i.test(e)}function It(e,t){le(e);var r=t.split("-"),s=parseInt(r[1]),n=parseFloat(r[2])||.2;s===0&&(s=1),s||(s=5);var a=D(e);if(a.crush_worklet_state!=="ok")return Ge(e,`shape-crush-${s}`);var l=new AudioWorkletNode(e,Ke);return l.parameters.get("depth").value=s,l.parameters.get("freq").value=n,l.isWorklet=!0,l}function le(e){var t=D(e);t.crush_worklet_state||(t.crush_worklet_state="trying",$t(e,Ke).then(r=>{t.crush_worklet_state=r?"ok":"ng"}))}function Dt(){class e extends AudioWorkletProcessor{constructor(){super(),this.phase=0,this.sample=0}static get parameterDescriptors(){return[{name:"depth",defaultValue:5,minValue:1,maxValue:20},{name:"freq",defaultValue:.2,minValue:.01,maxValue:1}]}process(r,s,n){for(var a=r[0],l=s[0],i=n.depth[0],u=n.freq[0],h=i+.4999,v=1/i,o=this.phase,d=this.sample,c=0;c<a.length;c++)for(var f=a[c],g=l[c],w=0;w<f.length;w++)o+=u,o>=1&&(o-=1,d=Math.round(f[w]*h)*v),g[w]=d;return this.phase=o,this.sample=d,!0}}registerProcessor("MODULE_NAME",e)}async function $t(e,t){if(!e.audioWorklet)return!1;var r=Dt.toString().replace("MODULE_NAME",t),s=`(${r})()`;try{e.startRendering||await e.resume();var n=new Blob([s],{type:"application/javascript"}),a=URL.createObjectURL(n);await e.audioWorklet.addModule(a)}catch{return!1}return!0}function Bt(e){var t=e.substr(0,2);return!!oe[t]}function xt(e,t){var r=e.createBiquadFilter(),s=t.substr(0,2),n=t.substr(0,5);return r.type=oe[n]||oe[s]||"allpass",r}var oe={pe:"peaking",ba:"bandpass",no:"notch",al:"allpass",lo:"lowpass",hi:"highpass",lowsh:"lowshelf",highs:"highshelf"};function Ne(e,t){return Ot(t)?It(e,t):Rt(t)?Ge(e,t):Bt(t)?xt(e,t):null}class ze{constructor(t){this.ctx=t,this.zeroRampTarget=.001}initParam(t,r){t.cancelScheduledValues(0),t.__paramEnveloperEvents=[new q(R,r,r,0,0)],t.setValueAtTime(r,0)}startEnvelope(t,r){var s=this.ctx.currentTime;r>s||(r=s);var n=t.__paramEnveloperEvents,a=n[n.length-1];if(Lt(n,s),n.length===0||r>a.t1){var l=a.v1;n.push(new q(R,l,l,0,r)),t.setValueAtTime(l,r);return}var i=ke(n,r);if(!i)throw"event list conformance bug, should not happen!";if(n.length=n.indexOf(i)+1,r===i.t1){t.cancelScheduledValues(r+1e-4),Ut("start:  envelope begins: value",a.v1);return}t.cancelScheduledValues(r);var u=Ve(i,r);i.v1=u,i.t1=r,i.type===R?t.setValueAtTime(u,r):i.type===ce?t.linearRampToValueAtTime(u,r):i.type===fe?(u=u||this.zeroRampTarget,t.exponentialRampToValueAtTime(u,r)):i.type===ue&&t.setValueAtTime(u,r)}addHold(t,r){if(r>0){var s=t.__paramEnveloperEvents,n=s[s.length-1];if(n.t1===1/0){var a=n.t0+r;this.startEnvelope(t,a)}else{var l=n.v1,i=n.t1,u=l,h=i+r;s.push(new q(R,l,u,i,h)),t.setValueAtTime(u,h)}}}addRamp(t,r,s,n){var a=1e-4;r>a||(r=a);var l=t.__paramEnveloperEvents,i=l[l.length-1],u=i.v1,h=i.t1;if(i.t1===1/0)throw"Error - change scheduled after a sweep with infinite duration";var v=s,o=h+r;n?(u=u||this.zeroRampTarget,v=v||this.zeroRampTarget,t.exponentialRampToValueAtTime(v,o)):t.linearRampToValueAtTime(v,o);var d=n?fe:ce;l.push(new q(d,u,v,h,o))}addSweep(t,r,s,n){var a=t.__paramEnveloperEvents,l=a[a.length-1],i=l.v1,u=l.t1;if(l.t1===1/0)throw"Error - change scheduled after a sweep with infinite duration";t.setTargetAtTime(s,u,n);var h,v;r>0?(h=u+r,v=Xe(r,i,s,n)):(h=1/0,v=s);var o=new q(ue,i,v,u,h);o.k=n,o.tgt=s,a.push(o)}getValueAtTime(t,r){var s=t.__paramEnveloperEvents,n=ke(s,r);return n?Ve(n,r):s[s.length-1].v1}}var R=1,ue=2,ce=3,fe=4;function q(e,t,r,s,n){this.type=e,this.v0=+t,this.v1=+r,this.t0=+s,this.t1=+n,this.k=.1,this.tgt=.1}function Lt(e,t){for(;e.length>0&&e[0].t1<t;)e.shift()}function ke(e,t){for(var r=0;r<e.length;r++)if(!(t>e[r].t1))return e[r];return null}function Ve(e,t){if(e.type===R)return e.v0;var r=t-e.t0;if(e.type===ce)return Ft(r,e.v0,e.v1,e.t1-e.t0);if(e.type===fe)return Wt(r,e.v0,e.v1,e.t1-e.t0);if(e.type===ue)return Xe(r,e.v0,e.tgt,e.k)}function Xe(e,t,r,s){return r+(t-r)*Math.exp(-e/s)}function Ft(e,t,r,s){return t+(r-t)*e/s}function Wt(e,t,r,s){return t*Math.pow(r/t,e/s)}var Ut=()=>{},te=1e-4;function re(e,t,r,s,n,a,l,i,u){F("PARAM: ",l,"time",n,"needsEnv="+u,"now",e.currentTime);var h=D(e);h.paramEnveloper||(h.paramEnveloper=new ze(e));var v=h.paramEnveloper;if(typeof a=="function"&&(a=a()),he(a)&&!u){t.setValueAtTime(a,0);return}var o=Array.isArray(a)?a:[a],d=l==="freq"?s:1;l==="gain"&&i==="freq"&&(d=s);var c={enveloper:v,type:l,envStarted:!1,attackRampNeeded:!!u,currValue:d,startTime:n,sweeping:!1,releaseTime:-1,releaseTarget:l==="freq"?-1:0},f=ve(e,r,o,s,n,l);if(o.forEach(p=>{typeof p=="function"&&(p=p()),he(p)&&(p=l==="freq"?{t:0,f:p}:{t:p}),typeof p=="object"&&(p.type||Ce(t,p,c,s))}),c.attackRampNeeded){var g={a:G.a};Ce(t,g,c,s)}if(c.releaseTarget<0&&(c.releaseTarget=c.currValue),c.envStarted||(F("- no schedules, init to:",c.currValue),v.initParam(t,c.currValue)),u&&c.releaseTime<0&&(c.releaseTime=G.r),c.releaseTime>=0&&(r.envelopes.push({param:t,releaseTime:c.releaseTime,releaseTarget:c.releaseTarget,rootEnvelope:!!u}),F("- stored release:",c.releaseTime,"target",c.releaseTarget)),l==="freq"&&(i==="root"||i==="freq")){var w=c.currValue/s;w!==0&&r.bendables.push({param:t,mult:w})}return c=null,f}function he(e){return typeof e!="number"?!1:!isNaN(e)}function _(e,t,r,s){return typeof s<"u"&&(e=s),typeof e=="function"&&(e=e()),he(e)?r?e:e<0?t:e:t}function Ce(e,t,r,s){var n=_(t.w,0,!1),a=_(t.a,-1,!1),l=_(t.h,-1,!1),i=_(t.s,1,!1,t.p),u=_(t.x,1,!1)|0,h=_(t.k,0,!0);if(a>=0&&a<te&&(a=te),r.attackRampNeeded&&a<0){var v=l>0||i!==1;v&&(a=G.a)}var o=r.currValue||1;if(h!==0){var d=Math.pow(s/261.625,h);o*=d}n===0&&(u=1),u>1&&a<0&&(f!==1||g!==0)&&(a=te);var c=r.startTime,f=_(t.t,1,!1),g=_(t.f,0,!0),w=_(t.d,-1,!1,t.q),p=_(t.r,-1,!1),y=_(t.z,-1,!1),m=_(t.dr,-1,!0);m>=0&&(w=p=m),w<=0&&(w=G.d);for(var A=Math.max(u,1),S=0;S<A;S++){n>0&&(x(r,e,o),B(r,e,n),c+=n,(f!==1||g!==0)&&a<0&&(a=0)),a>=0&&x(r,e,o),S>0&&(o=r.enveloper.getValueAtTime(e,c)),o=o*f+g;var Ee=80;r.type==="freq"&&o<Ee&&g<0&&(o=2*Ee-o,g=-g),a>=0&&(r.sweeping&&B(r,e,0),r.enveloper.addRamp(e,a,o),r.attackRampNeeded=!1,c+=a||0),l>0&&(x(r,e,o),B(r,e,l),c+=l),i!==1&&(x(r,e,o),o*=i,r.sweeping&&B(r,e,0),r.enveloper.addSweep(e,-1,o,w),r.sweeping=!0)}r.currValue=o,p>=0&&(r.releaseTime=p),y>=0&&(r.releaseTarget=r.currValue*y)}function B(e,t,r){e.enveloper.addHold(t,r||0),e.sweeping=!1}function x(e,t,r){e.envStarted||(e.attackRampNeeded&&(r=0),e.enveloper.initParam(t,r),e.enveloper.startEnvelope(t,e.startTime),e.envStarted=!0,F("- initted param:",r,"time",e.startTime))}var G={w:0,t:1,f:0,k:0,a:.05,h:0,d:.1,s:1,r:.1,z:-1,x:1},F=()=>{};function ve(e,t,r,s,n,a){for(var l=qe(r),i=[],u=0;u<l.length;u++){var h=l[u];if(typeof h=="function"&&(h=h()),typeof h=="string"&&(h={type:h}),typeof h=="object"&&!(typeof h.type>"u")){var v=h.type;typeof v=="function"&&(v=v()),v||(v="sine");var o=null,d=null;o=Ne(e,v),d=o||yt(e,v),d.start&&d.start(n),t.nodes.push(d);var c=null,f=!o&&a==="root",g=f||h.gain||!o&&a==="freq";if(g&&(c=e.createGain(),t.nodes.push(c)),Re(e,t,d,h,s,n,a,c,f),!o&&h.effect)for(var w=qe(h.effect),p=0;p<w.length;p++){var y=w[p];if(typeof y=="function"&&(y=y()),typeof y=="string"&&(y={type:y}),typeof y=="object"){var m=Ne(e,y.type);m&&(Re(e,t,m,y,s,n,a,null,!1),t.nodes.push(m),d.connect(m),d=m)}}c&&(d.connect(c),d=c),o?(i.forEach(S=>S.connect(d)),i=[d]):i.push(d)}}if(i.length===0)return null;if(i.length===1)return i.pop();var A=e.createGain();return t.nodes.push(A),i.forEach(S=>S.connect(A)),A}function qe(e){return typeof e=="function"&&(e=e()),Array.isArray(e)?e:[e]}function Re(e,t,r,s,n,a,l,i,u){if(r.Q&&s.Q){var h=re(e,r.Q,t,n,a,s.Q,"Q",l,!1);h&&h.connect(r.Q)}if(r.frequency||r.playbackRate){var v=r.frequency||r.playbackRate,o=r.playbackRate?n/440:n,d=s.freq||{},c=re(e,v,t,o,a,d,"freq",l,!1);c&&c.connect(v)}var f=i?i.gain:r.gain||null;if(f){var g=re(e,f,t,n,a,s.gain,"gain",l,u);g&&g.connect(f)}}function Oe(e){var t={},r=[],s=new ze(e);this.maxVoices=32,this.play=function(c,f,g,w,p,y){a(),n(this.maxVoices-1);var m=h(c,f,g,w,y);return r.push(m.id),t[m.id]=m,p&&o(m,p),m.id},this.bend=function(c,f,g,w){var p=t[c];p&&v(p,f,g,w)},this.release=function(c,f){var g=t[c];g&&o(g,f)},this.isPlaying=function(c){return!!t[c]},this.releaseAll=function(c){r.forEach(f=>{o(t[f],c)})},this.dispose=function(){n(0),t=null,r=null,clearInterval(l)};function n(c){for(;r.length>c;){var f=r.shift();d(t[f]),delete t[f]}}function a(){for(var c=e.currentTime,f=0;f<r.length;f++){var g=r[f],w=t[g];w.endTime===0||c<w.endTime||(d(w),delete t[g],r.splice(f,1),f--)}}var l=setInterval(a,800);function i(c){++u>9999&&(u=1),this.id=u,this.time=+c,this.endTime=0,this.nodes=[],this.envelopes=[],this.bendables=[]}var u=0;function h(c,f,g,w,p){var y=new i(w),m=ve(e,y,c,f,w,"root");if(!m){var A={type:"sine"};m=ve(e,y,A,f,w,"root")}if(g===1)m.connect(p);else{var S=e.createGain();y.nodes.push(S),S.gain.value=g<1?g*g:g,m.connect(S),S.connect(p)}return y}function v(c,f,g,w){c.endTime>0||c.bendables.forEach(p=>{var y=f*p.mult;p.param.cancelScheduledValues(w),p.param.setTargetAtTime(y,w,g)})}function o(c,f){c.endTime>0||(c.endTime=f,c.envelopes.forEach((g,w)=>{var p=g.releaseTime;if(p>=0){var y=g.param;s.startEnvelope(y,f);var m=g.releaseTarget||0;if(s.addSweep(y,-1,m,p),g.rootEnvelope){var A=f+4*p;c.endTime=Math.max(c.endTime,A)}}}))}function d(c){for(;c.nodes.length>0;){var f=c.nodes.pop();f.stop&&f.stop(),f.buffer&&(f.buffer=null),f.gain&&f.gain.cancelScheduledValues(0),f.frequency&&f.frequency.cancelScheduledValues(0),f.playbackRate&&f.playbackRate.cancelScheduledValues(0),f.Q&&f.Q.cancelScheduledValues(0),f.disconnect(),f=null}c.nodes=null,c.envelopes=null,c.bendables=null}}const Ht="wasgen",Qt="0.18.4",jt="Web Audio Sound Generator",Gt="src/index.js",Kt="dist/src/index.d.ts",zt=["/src","/dist"],Xt={start:"cd demo && webpack serve",types:"tsc",build:"tsc; cd demo && webpack --env prod"},Jt="andy@fenomas.com",Yt="ISC",Zt="github:fenomas/wasgen",er={"param-enveloper":"^0.3.0"},tr={"audiobuffer-to-wav":"^1.0.0","webaudio-viz":"0.2.0"},rr={name:Ht,version:Qt,description:jt,main:Gt,typings:Kt,files:zt,scripts:Xt,author:Jt,license:Yt,repository:Zt,dependencies:er,devDependencies:tr};var nr=rr.version;function sr(e=null,t=null,r=!1,s=!1){this.version=nr,s||console.log(`wasgen     v${this.version}`);var n=e||new(window.AudioContext||window.webkitAudioContext),a=new Oe(n),l=()=>{n.startRendering||(n.state!=="running"&&n.resume(),le(n))},i=t||n.destination;n.startRendering&&le(n);var u=()=>n.currentTime+.05;this.play=function(o,d=440,c=1,f=0,g=0,w=null){l(),d=d||440,c=c||1,f>0||(f=u()),g=g||0,w=w||v||i;var p=a.play(o,d,c,f,g,w);return p},this.bend=function(o,d=440,c=.1,f=0){d=d||440,c=c||.1,f=f||u(),a.bend(o,d,c,f)},this.release=function(o,d=0){d=d||u(),a.release(o,d)},this.noteIsPlaying=function(o){return a.isPlaying(o)},this.releaseAll=function(o=0){o=o||u(),a.releaseAll(o)},this.compressor=null,this.now=function(){return n.currentTime},this.maxVoices=function(o=32){return o&&(a.maxVoices=o),a.maxVoices},this.destination=function(o){return o&&(i=o,h()),i},this.audioContext=function(o){return o&&(this.dispose(),n=o,a=new Oe(n),i=n.destination,h()),n};var h=()=>{v&&v.disconnect(),!r&&(v=n.createDynamicsCompressor(),v.threshold.value=-24,v.knee.value=25,v.ratio.value=20,v.attack.value=.003,v.release.value=.25,v.connect(i),this.compressor=v)},v=null;h(),this.dispose=function(){a.dispose(),a=null,v&&v.disconnect(),v=null,i=null,n=null}}var we={},ye={},me={},be={};Object.defineProperty(be,"__esModule",{value:!0});class ar{constructor(t){this.comparator=t.comparator,this.data=t.initialValues?t.initialValues.slice(0):[],this._heapify()}_heapify(){if(this.data.length>0)for(let t=0;t<this.data.length;t++)this._bubbleUp(t)}queue(t){this.data.push(t),this._bubbleUp(this.data.length-1)}dequeue(){const t=this.data[0],r=this.data.pop();return this.data.length>0&&r!==void 0&&(this.data[0]=r,this._bubbleDown(0)),t}peek(){return this.data[0]}clear(){this.data.length=0}_bubbleUp(t){for(;t>0;){const r=t-1>>>1;if(this.comparator(this.data[t],this.data[r])<0){const s=this.data[r];this.data[r]=this.data[t],this.data[t]=s,t=r}else break}}_bubbleDown(t){let r=this.data.length-1;for(;;){const s=(t<<1)+1,n=s+1;let a=t;if(s<=r&&this.comparator(this.data[s],this.data[a])<0&&(a=s),n<=r&&this.comparator(this.data[n],this.data[a])<0&&(a=n),a!==t){const l=this.data[a];this.data[a]=this.data[t],this.data[t]=l,t=a}else break}}}be.default=ar;Object.defineProperty(me,"__esModule",{value:!0});const ir=be;class lr{constructor(t){this._length=0,this._length=t.initialValues?t.initialValues.length:0,this.strategy=new ir.default(t)}get length(){return this._length}queue(t){this._length++,this.strategy.queue(t)}dequeue(){if(!this._length)throw new Error("Empty queue");return this._length--,this.strategy.dequeue()}peek(){if(!this._length)throw new Error("Empty queue");return this.strategy.peek()}clear(){this._length=0,this.strategy.clear()}}me.default=lr;Object.defineProperty(ye,"__esModule",{value:!0});const or=me;ye.default=or.default;Object.defineProperty(we,"__esModule",{value:!0});var Je=we.Pathfinder=void 0;const ur=ye,Ie=(e,t,r=0,s=0,n=!0)=>({node:e,previous:t,f:r,g:s,open:n});class cr{methods;maxIterations=1e6;constructor(t={}){this.methods={nodeToPrimitive:r=>r,getNeighbors:()=>[],getMoveCost:()=>1,getHeuristic:()=>1,...t}}findPath(t,r){const s=this.methods.nodeToPrimitive(t),n=this.methods.nodeToPrimitive(r),a=new ur.default({comparator:(d,c)=>d.f-c.f}),l={},i=Ie(t,null,0,0,!0);a.queue(i),l[s]=i;let u=0;for(;a.length>0;){if(u++>this.maxIterations)throw new Error("Infinite loop!");const d=a.dequeue();if(!d.open)continue;if(this.methods.nodeToPrimitive(d.node)===n)break;d.open=!1,this.methods.getNeighbors(d.node).forEach(f=>{const g=this.methods.getMoveCost(d.node,f);if(g<0)return;const w=this.methods.nodeToPrimitive(f),p=l[w],y=d.g+g;if(p&&p.g<=y)return;const m=this.methods.getHeuristic(f,r);if(p)p.open=!0,p.g=y,p.f=y+m,p.previous=d,a.queue(p);else{const A=Ie(f,d,y+m,y,!0);l[w]=A,a.queue(A)}})}a.clear();const h=l[n];if(!h)return[];const v=[h.node];let o=h;for(;o.previous;)v.push(o.previous.node),o=o.previous;return v.reverse()}}Je=we.Pathfinder=cr;const fr={type:"sine",freq:{type:"triangle",gain:{t:3,a:.01,h:.01,d:.7,s:.1,r:.05,k:-1.2}},gain:{t:.4,a:.005,h:.01,d:.7,s:0}},hr={type:"triangle",freq:{type:"triangle",freq:{t:3},gain:{t:4,a:.01,h:.01,d:.4,s:.1,r:.05,k:-1}},gain:{t:.4,a:.005,h:.01,d:.7,s:0}},vr={type:"sine",freq:[{type:"sine",freq:{t:3},gain:{t:4,a:0,h:.01,d:1,s:1,r:.05}}],gain:{t:.5,a:.002,h:.01,d:.3,s:.01,r:.05}},dr={type:"n0",freq:{p:.9,q:1},gain:{t:.2,a:.005,h:.01,d:.05,s:0,r:.05}},pr={type:"triangle",freq:[{p:.5},{type:"n0",freq:{t:5,p:0},gain:{t:0,a:0,d:.01,s:0,r:.01}}],gain:{a:.005,h:.03,d:.05,s:0,r:.05}},Te=e=>Math.pow(2,(e-69)/12)*440,C=(e=0,t=1)=>e+Math.random()*(t-e+1)|0,Ye=e=>Math.abs(e);let ne=0;const de=[0,2,4,5,7,9,11],gr=(e=0)=>de.map((t,r)=>de[(r+e)%7]),Ze=.34,et=(e=0)=>de.includes(e%12),$=window,M=.5;let K=[0];const De=e=>{wr(e),Er(e),Ar(e),Sr(e)},wr=e=>{const t=e.now()+.05,r=t+M*3,s=$.progression||[1,5,6,4],n=[60,48,60];K=gr(s[ne%4]-1);const a=[0,2,4].map((l,i)=>n[i]+K[l]);a.push(a[0]-12),a.forEach(l=>{e.play(fr,Te(l),Ze,t,r)}),ne=(ne+1)%4},yr=e=>{let t=e<72?e+6:e-6;return t+=C(-2,2),et(t)||t++,t},mr=e=>{for(;e.length%4>0;)e.splice(C(0,e.length-1),0,0)},br=(e,t=0)=>{let r=M*2;return e.length>2&&(r/=2),e.length>4&&(r/=2),t<e.length-1&&e[t+1]===0&&(r*=2),r},Tr=e=>(e=(72+e)/2|0,et(e)||e++,e),tt=(e=0)=>{const t=K.indexOf(e%12);return t<0?8:[1,5,2,3,1,4,5][t]},rt=new Je({getNeighbors:e=>[0,0,0,0,0,0].map(()=>e+C(-5,5)),getHeuristic:(e,t)=>Ye(e-t)+C(5,8),getMoveCost:(e,t)=>C(1,4)+tt(t)});let se=72;const Er=e=>{const t=yr(se),r=rt.findPath(se,t);mr(r),r.forEach((s,n)=>{let a=e.now()+.05+n*M*4/r.length;const l=br(r,n);s>0&&e.play(hr,Te(s),Ze,a,a+l)}),se=Tr(t),Pr(`[${r.join(", ")}]`)};$.finder=rt;$.rand=C;$.abs=Ye;$.discordance=tt;const Ar=e=>{const t=e.now()+.05;[0].forEach(r=>{const s=t+r*M;e.play(pr,50,.8,s,s+M/2)}),[1,2.5,3].forEach(r=>{const s=e.now()+.05+r*M;e.play(dr,80,.25,s,s+M/2)})},Sr=e=>{const r=[0,2,6],s=[0,2,3.5];r.forEach((n,a)=>{let l=48+K[n];for(;l>46;)l-=12;for(;l<34;)l+=12;const i=e.now()+.05+s[a]*M;e.play(vr,Te(l),.35,i,i+M*2)})};var _r=je("<div><button></button><br><br><pre>Path: ");const[nt,$e]=Le(!1),[Mr,Pr]=Le("");let Be,L;const Nr=()=>{L||(L=new sr),nt()?($e(!1),clearInterval(Be)):(De(L),Be=setInterval(De,M*4*1e3,L),$e(!0))},kr=()=>(()=>{var e=_r(),t=e.firstChild,r=t.nextSibling,s=r.nextSibling,n=s.nextSibling;return n.firstChild,t.$$click=Nr,H(t,()=>nt()?"Stop":"Start"),n.style.setProperty("font-size","200%"),H(n,Mr,null),e})();gt(["click"]);var Vr=je("<main><h2>A* Music Demo!");const Cr=document.getElementById("root");pt(()=>(()=>{var e=Vr();return e.firstChild,H(e,vt(kr,{}),null),e})(),Cr);
//# sourceMappingURL=index--RR9P28T.js.map

(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}})();const Je=(e,t)=>e===t,me={equals:Je};let Ye=De;const N=1,U=2,qe={owned:null,cleanups:null,context:null,owner:null};var A=null;let J=null,Ze=null,b=null,T=null,k=null,z=0;function et(e,t){const r=b,s=A,n=e.length===0,a=t===void 0?s:t,l=n?qe:{owned:null,cleanups:null,context:a?a.context:null,owner:a},i=n?e:()=>e(()=>de(()=>I(l)));A=l,b=null;try{return q(i,!0)}finally{b=r,A=s}}function ve(e,t){t=t?Object.assign({},me,t):me;const r={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},s=n=>(typeof n=="function"&&(n=n(r.value)),$e(r,n));return[tt.bind(r),s]}function ne(e,t,r){const s=nt(e,t,!1,N);pe(s)}function de(e){if(b===null)return e();const t=b;b=null;try{return e()}finally{b=t}}function tt(){if(this.sources&&this.state)if(this.state===N)pe(this);else{const e=T;T=null,q(()=>H(this),!1),T=e}if(b){const e=this.observers?this.observers.length:0;b.sources?(b.sources.push(this),b.sourceSlots.push(e)):(b.sources=[this],b.sourceSlots=[e]),this.observers?(this.observers.push(b),this.observerSlots.push(b.sources.length-1)):(this.observers=[b],this.observerSlots=[b.sources.length-1])}return this.value}function $e(e,t,r){let s=e.value;return(!e.comparator||!e.comparator(s,t))&&(e.value=t,e.observers&&e.observers.length&&q(()=>{for(let n=0;n<e.observers.length;n+=1){const a=e.observers[n],l=J&&J.running;l&&J.disposed.has(a),(l?!a.tState:!a.state)&&(a.pure?T.push(a):k.push(a),a.observers&&xe(a)),l||(a.state=N)}if(T.length>1e6)throw T=[],new Error},!1)),t}function pe(e){if(!e.fn)return;I(e);const t=z;rt(e,e.value,t)}function rt(e,t,r){let s;const n=A,a=b;b=A=e;try{s=e.fn(t)}catch(l){return e.pure&&(e.state=N,e.owned&&e.owned.forEach(I),e.owned=null),e.updatedAt=r+1,Be(l)}finally{b=a,A=n}(!e.updatedAt||e.updatedAt<=r)&&(e.updatedAt!=null&&"observers"in e?$e(e,s):e.value=s,e.updatedAt=r)}function nt(e,t,r,s=N,n){const a={fn:e,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:A,context:A?A.context:null,pure:r};return A===null||A!==qe&&(A.owned?A.owned.push(a):A.owned=[a]),a}function Oe(e){if(e.state===0)return;if(e.state===U)return H(e);if(e.suspense&&de(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<z);)e.state&&t.push(e);for(let r=t.length-1;r>=0;r--)if(e=t[r],e.state===N)pe(e);else if(e.state===U){const s=T;T=null,q(()=>H(e,t[0]),!1),T=s}}function q(e,t){if(T)return e();let r=!1;t||(T=[]),k?r=!0:k=[],z++;try{const s=e();return st(r),s}catch(s){r||(k=null),T=null,Be(s)}}function st(e){if(T&&(De(T),T=null),e)return;const t=k;k=null,t.length&&q(()=>Ye(t),!1)}function De(e){for(let t=0;t<e.length;t++)Oe(e[t])}function H(e,t){e.state=0;for(let r=0;r<e.sources.length;r+=1){const s=e.sources[r];if(s.sources){const n=s.state;n===N?s!==t&&(!s.updatedAt||s.updatedAt<z)&&Oe(s):n===U&&H(s,t)}}}function xe(e){for(let t=0;t<e.observers.length;t+=1){const r=e.observers[t];r.state||(r.state=U,r.pure?T.push(r):k.push(r),r.observers&&xe(r))}}function I(e){let t;if(e.sources)for(;e.sources.length;){const r=e.sources.pop(),s=e.sourceSlots.pop(),n=r.observers;if(n&&n.length){const a=n.pop(),l=r.observerSlots.pop();s<n.length&&(a.sourceSlots[l]=s,n[s]=a,r.observerSlots[s]=l)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)I(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)I(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function at(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Be(e,t=A){throw at(e)}function it(e,t){return de(()=>e(t||{}))}function lt(e,t,r){let s=r.length,n=t.length,a=s,l=0,i=0,u=t[n-1].nextSibling,h=null;for(;l<n||i<a;){if(t[l]===r[i]){l++,i++;continue}for(;t[n-1]===r[a-1];)n--,a--;if(n===l){const v=a<s?i?r[i-1].nextSibling:r[a-i]:u;for(;i<a;)e.insertBefore(r[i++],v)}else if(a===i)for(;l<n;)(!h||!h.has(t[l]))&&t[l].remove(),l++;else if(t[l]===r[a-1]&&r[i]===t[n-1]){const v=t[--n].nextSibling;e.insertBefore(r[i++],t[l++].nextSibling),e.insertBefore(r[--a],v),t[n]=r[a]}else{if(!h){h=new Map;let o=i;for(;o<a;)h.set(r[o],o++)}const v=h.get(t[l]);if(v!=null)if(i<v&&v<a){let o=l,d=1,c;for(;++o<n&&o<a&&!((c=h.get(t[o]))==null||c!==v+d);)d++;if(d>v-i){const f=t[l];for(;i<v;)e.insertBefore(r[i++],f)}else e.replaceChild(r[i++],t[l++])}else l++;else t[l++].remove()}}}const be="_$DX_DELEGATE";function ot(e,t,r,s={}){let n;return et(a=>{n=a,t===document?e():Q(t,e(),t.firstChild?null:void 0,r)},s.owner),()=>{n(),t.textContent=""}}function Le(e,t,r){let s;const n=()=>{const l=document.createElement("template");return l.innerHTML=e,l.content.firstChild},a=()=>(s||(s=n())).cloneNode(!0);return a.cloneNode=a,a}function ut(e,t=window.document){const r=t[be]||(t[be]=new Set);for(let s=0,n=e.length;s<n;s++){const a=e[s];r.has(a)||(r.add(a),t.addEventListener(a,ct))}}function Q(e,t,r,s){if(r!==void 0&&!s&&(s=[]),typeof t!="function")return G(e,t,s,r);ne(n=>G(e,t(),n,r),s)}function ct(e){let t=e.target;const r=`$$${e.type}`,s=e.target,n=e.currentTarget,a=u=>Object.defineProperty(e,"target",{configurable:!0,value:u}),l=()=>{const u=t[r];if(u&&!t.disabled){const h=t[`${r}Data`];if(h!==void 0?u.call(t,h,e):u.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&a(t.host),!0},i=()=>{for(;l()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const u=e.composedPath();a(u[0]);for(let h=0;h<u.length-2&&(t=u[h],!!l());h++){if(t._$host){t=t._$host,i();break}if(t.parentNode===n)break}}else i();a(s)}function G(e,t,r,s,n){for(;typeof r=="function";)r=r();if(t===r)return r;const a=typeof t,l=s!==void 0;if(e=l&&r[0]&&r[0].parentNode||e,a==="string"||a==="number"){if(a==="number"&&(t=t.toString(),t===r))return r;if(l){let i=r[0];i&&i.nodeType===3?i.data!==t&&(i.data=t):i=document.createTextNode(t),r=V(e,r,s,i)}else r!==""&&typeof r=="string"?r=e.firstChild.data=t:r=e.textContent=t}else if(t==null||a==="boolean")r=V(e,r,s);else{if(a==="function")return ne(()=>{let i=t();for(;typeof i=="function";)i=i();r=G(e,i,r,s)}),()=>r;if(Array.isArray(t)){const i=[],u=r&&Array.isArray(r);if(se(i,t,r,n))return ne(()=>r=G(e,i,r,s,!0)),()=>r;if(i.length===0){if(r=V(e,r,s),l)return r}else u?r.length===0?Te(e,i,s):lt(e,r,i):(r&&V(e),Te(e,i));r=i}else if(t.nodeType){if(Array.isArray(r)){if(l)return r=V(e,r,s,t);V(e,r,null,t)}else r==null||r===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);r=t}}return r}function se(e,t,r,s){let n=!1;for(let a=0,l=t.length;a<l;a++){let i=t[a],u=r&&r[e.length],h;if(!(i==null||i===!0||i===!1))if((h=typeof i)=="object"&&i.nodeType)e.push(i);else if(Array.isArray(i))n=se(e,i,u)||n;else if(h==="function")if(s){for(;typeof i=="function";)i=i();n=se(e,Array.isArray(i)?i:[i],Array.isArray(u)?u:[u])||n}else e.push(i),n=!0;else{const v=String(i);u&&u.nodeType===3&&u.data===v?e.push(u):e.push(document.createTextNode(v))}}return n}function Te(e,t,r=null){for(let s=0,n=t.length;s<n;s++)e.insertBefore(t[s],r)}function V(e,t,r,s){if(r===void 0)return e.textContent="";const n=s||document.createTextNode("");if(t.length){let a=!1;for(let l=t.length-1;l>=0;l--){const i=t[l];if(n!==i){const u=i.parentNode===e;!a&&!l?u?e.replaceChild(n,i):e.insertBefore(n,r):u&&i.remove()}else a=!0}}else e.insertBefore(n,r);return[n]}var Y=new Map;function $(e){return Y.has(e)||Y.set(e,{}),Y.get(e)}function ft(e,t){t=t.toLowerCase();var r;return t[0]==="w"&&(r=gt(e,t)),t[0]==="p"&&(r=dt(e,t)),t[0]==="n"&&(r=yt(e,t)),r||(r=ht(e,t)),r}function ht(e,t){var r=e.createOscillator();return r.type=t[0]==="t"?"triangle":vt[t.substr(0,2)]||"sine",r}var vt={si:"sine",sq:"square",sa:"sawtooth",tr:"triangle"};function dt(e,t){var r=Math.round(parseInt(t.substr(1))||50);r=Math.min(Math.max(r,1),99);var s=e.createOscillator();s.type="sawtooth";var n=e.createWaveShaper();return n.curve=pt(r),s.connect(n),{start:a=>s.start(a),frequency:s.frequency,connect:a=>n.connect(a),disconnect:()=>{n.disconnect(),s.disconnect(),s.stop()},input:s}}function pt(e){var t=256;if(Z[e])return Z[e];for(var r=new Float32Array(t),s=t*e/100,n=0;n<t;n++)r[n]=n<s?1:-1;return Z[e]=r}var Z={};function gt(e,t){var r=e.createOscillator();return t.length<2&&(t+="9"),r.setPeriodicWave(wt(e,t)),r}function wt(e,t){var r=$(e);r.periodicWaves||(r.periodicWaves={});var s=r.periodicWaves;if(!s[t]){for(var n=new Float32Array(t.length),a=new Float32Array(t.length),l=1;l<t.length;++l){var i=parseFloat(t[l])/9;n[l]=i*i}s[t]=e.createPeriodicWave(a,n)}return s[t]}function yt(e,t){var r=$(e);r.noiseBuffers||(r.noiseBuffers={});var s=r.noiseBuffers,n=e.createBufferSource(),a=mt[t]||"n0";return s[a]||(s[a]=bt(e,a)),n.buffer=s[a],n.loop=!0,n}var mt={n0:"n0",n1:"n1",np:"np",nb:"nb"};function bt(e,t){var r={n0:1,n1:1.5,nb:1.5,np:1.5}[t],s=r*e.sampleRate|0,n=e.createBuffer(1,s,e.sampleRate),a=n.getChannelData(0);return t==="n0"&&Tt(a),t==="nb"&&Et(a),t==="np"&&At(a),t==="n1"&&St(a),n}function Tt(e){for(var t=0;t<e.length;t++)e[t]=2*Math.random()-1}function At(e){var t=0,r=0,s=0,n=0,a=0,l=0,i=0,u=0;e.forEach((h,v)=>{var o=2*Math.random()-1;t=.99886*t+o*.0555179,r=.99332*r+o*.0750759,s=.969*s+o*.153852,n=.8665*n+o*.3104856,a=.55*a+o*.5329522,l=-.7616*l-o*.016898,e[v]=t+r+s+n+a+l+i+o*.5362,i=o*.115926,u=Math.max(u,Math.abs(e[v]))}),e.forEach((h,v)=>{e[v]/=u})}function Et(e){for(var t=0,r=0,s=0;s<e.length;s++){var n=2*Math.random()-1;t=(t+n*.02)/1.02,r=Math.max(r,Math.abs(t)),e[s]=t}e.forEach((a,l)=>{e[l]/=r})}function St(e){for(var t=Ae(1),r=0,s=0;s<24;s++){t=Ae(t);var n=1+s%16,a=2+t*10,l=Mt(e,n,a,1/4);r=Math.max(r,l)}e.forEach((i,u)=>{e[u]/=r})}var Mt=(e,t,r,s)=>{for(var n=0,a=2*Math.PI*440/44100,l=Math.random()*2*Math.PI,i=Math.random()*2*Math.PI,u=0;u<e.length;u++){var h=u*a,v=Ee(l+t*h),o=Ee(i+r*h);e[u]+=v*o*s,n=Math.max(n,Math.abs(e[u]))}return n};function Ae(e){return e=(e+Math.sqrt(17))*Math.sqrt(23),e-Math.floor(e)}var Ee=(()=>{for(var e=[],t=512/(2*Math.PI),r=0;r<512;r++)e[r]=Math.sin(r/t);return s=>e[s*t&511]})();function _t(e){return/^shape/i.test(e)}function Fe(e,t){var r=t.split("-"),s=r[1],n=parseFloat(r[2]);isNaN(n)&&(n=5),_[s]||(console.warn("unknown curve type: "+s),s="linear",n=5);var a=s+"-"+n;ee[a]||(ee[a]=_[s](n));var l=ee[a],i=e.createWaveShaper();return i.curve=l,i}var ee={},_={};_.linear=e=>new Float32Array([-1,1]);_.clip=e=>{var t=e/10;return new Float32Array([-t,-t,0,t,t])};_.tanh=e=>{for(var t=.5*X(1,e,40),r=255,s=new Float32Array(r),n=0;n<s.length;n++){var a=2*(n/(r-1))-1;s[n]=Math.tanh(a*t)}return s};_.boost=e=>{for(var t=Math.ceil(e/2),r=new Float32Array(2*t+1),s=0;s<r.length;s++)r[s]=s<t?-1:s===t?0:1;return r};_.fold=e=>{var t=e/10;return new Float32Array([0,-t,0,t,0])};_.crush=e=>{e=X(1,e,40);for(var t=e,r=255,s=new Float32Array(r),n=0;n<r;n++){var a=2*(n/(r-1))-1;s[n]=Math.round(a*(t+.4999))/t,Math.abs(s[n])<.001&&(s[n]=0)}return s};_.thin=e=>{var t=1+e/2;t=X(1.5,t,20);for(var r=255,s=new Float32Array(r),n=0;n<r;n++){var a=2*(n/(r-1))-1;a>0?s[n]=j(0,1,a,t):s[n]=j(0,-1,-a,t)}return s};_.fat=e=>{var t=1-e/9;t=X(.05,t,.95);for(var r=255,s=new Float32Array(r),n=0;n<r;n++){var a=2*(n/(r-1))-1;a>0?s[n]=j(0,1,a,t):s[n]=j(0,-1,-a,t)}return s};function j(e,t,r,s){return e+(t-e)*Math.pow(r,s)}function X(e,t,r){return t<e?e:t>r?r:t}var We="bit-crusher";function Pt(e){return/^crush/i.test(e)}function kt(e,t){ae(e);var r=t.split("-"),s=parseInt(r[1]),n=parseFloat(r[2])||.2;s===0&&(s=1),s||(s=5);var a=$(e);if(a.crush_worklet_state!=="ok")return Fe(e,`shape-crush-${s}`);var l=new AudioWorkletNode(e,We);return l.parameters.get("depth").value=s,l.parameters.get("freq").value=n,l.isWorklet=!0,l}function ae(e){var t=$(e);t.crush_worklet_state||(t.crush_worklet_state="trying",Vt(e,We).then(r=>{t.crush_worklet_state=r?"ok":"ng"}))}function Nt(){class e extends AudioWorkletProcessor{constructor(){super(),this.phase=0,this.sample=0}static get parameterDescriptors(){return[{name:"depth",defaultValue:5,minValue:1,maxValue:20},{name:"freq",defaultValue:.2,minValue:.01,maxValue:1}]}process(r,s,n){for(var a=r[0],l=s[0],i=n.depth[0],u=n.freq[0],h=i+.4999,v=1/i,o=this.phase,d=this.sample,c=0;c<a.length;c++)for(var f=a[c],g=l[c],w=0;w<f.length;w++)o+=u,o>=1&&(o-=1,d=Math.round(f[w]*h)*v),g[w]=d;return this.phase=o,this.sample=d,!0}}registerProcessor("MODULE_NAME",e)}async function Vt(e,t){if(!e.audioWorklet)return!1;var r=Nt.toString().replace("MODULE_NAME",t),s=`(${r})()`;try{e.startRendering||await e.resume();var n=new Blob([s],{type:"application/javascript"}),a=URL.createObjectURL(n);await e.audioWorklet.addModule(a)}catch{return!1}return!0}function Ct(e){var t=e.substr(0,2);return!!ie[t]}function Rt(e,t){var r=e.createBiquadFilter(),s=t.substr(0,2),n=t.substr(0,5);return r.type=ie[n]||ie[s]||"allpass",r}var ie={pe:"peaking",ba:"bandpass",no:"notch",al:"allpass",lo:"lowpass",hi:"highpass",lowsh:"lowshelf",highs:"highshelf"};function Se(e,t){return Pt(t)?kt(e,t):_t(t)?Fe(e,t):Ct(t)?Rt(e,t):null}class Ue{constructor(t){this.ctx=t,this.zeroRampTarget=.001}initParam(t,r){t.cancelScheduledValues(0),t.__paramEnveloperEvents=[new C(R,r,r,0,0)],t.setValueAtTime(r,0)}startEnvelope(t,r){var s=this.ctx.currentTime;r>s||(r=s);var n=t.__paramEnveloperEvents,a=n[n.length-1];if(It(n,s),n.length===0||r>a.t1){var l=a.v1;n.push(new C(R,l,l,0,r)),t.setValueAtTime(l,r);return}var i=Me(n,r);if(!i)throw"event list conformance bug, should not happen!";if(n.length=n.indexOf(i)+1,r===i.t1){t.cancelScheduledValues(r+1e-4),Ot("start:  envelope begins: value",a.v1);return}t.cancelScheduledValues(r);var u=_e(i,r);i.v1=u,i.t1=r,i.type===R?t.setValueAtTime(u,r):i.type===oe?t.linearRampToValueAtTime(u,r):i.type===ue?(u=u||this.zeroRampTarget,t.exponentialRampToValueAtTime(u,r)):i.type===le&&t.setValueAtTime(u,r)}addHold(t,r){if(r>0){var s=t.__paramEnveloperEvents,n=s[s.length-1];if(n.t1===1/0){var a=n.t0+r;this.startEnvelope(t,a)}else{var l=n.v1,i=n.t1,u=l,h=i+r;s.push(new C(R,l,u,i,h)),t.setValueAtTime(u,h)}}}addRamp(t,r,s,n){var a=1e-4;r>a||(r=a);var l=t.__paramEnveloperEvents,i=l[l.length-1],u=i.v1,h=i.t1;if(i.t1===1/0)throw"Error - change scheduled after a sweep with infinite duration";var v=s,o=h+r;n?(u=u||this.zeroRampTarget,v=v||this.zeroRampTarget,t.exponentialRampToValueAtTime(v,o)):t.linearRampToValueAtTime(v,o);var d=n?ue:oe;l.push(new C(d,u,v,h,o))}addSweep(t,r,s,n){var a=t.__paramEnveloperEvents,l=a[a.length-1],i=l.v1,u=l.t1;if(l.t1===1/0)throw"Error - change scheduled after a sweep with infinite duration";t.setTargetAtTime(s,u,n);var h,v;r>0?(h=u+r,v=He(r,i,s,n)):(h=1/0,v=s);var o=new C(le,i,v,u,h);o.k=n,o.tgt=s,a.push(o)}getValueAtTime(t,r){var s=t.__paramEnveloperEvents,n=Me(s,r);return n?_e(n,r):s[s.length-1].v1}}var R=1,le=2,oe=3,ue=4;function C(e,t,r,s,n){this.type=e,this.v0=+t,this.v1=+r,this.t0=+s,this.t1=+n,this.k=.1,this.tgt=.1}function It(e,t){for(;e.length>0&&e[0].t1<t;)e.shift()}function Me(e,t){for(var r=0;r<e.length;r++)if(!(t>e[r].t1))return e[r];return null}function _e(e,t){if(e.type===R)return e.v0;var r=t-e.t0;if(e.type===oe)return qt(r,e.v0,e.v1,e.t1-e.t0);if(e.type===ue)return $t(r,e.v0,e.v1,e.t1-e.t0);if(e.type===le)return He(r,e.v0,e.tgt,e.k)}function He(e,t,r,s){return r+(t-r)*Math.exp(-e/s)}function qt(e,t,r,s){return t+(r-t)*e/s}function $t(e,t,r,s){return t*Math.pow(r/t,e/s)}var Ot=()=>{},te=1e-4;function re(e,t,r,s,n,a,l,i,u){F("PARAM: ",l,"time",n,"needsEnv="+u,"now",e.currentTime);var h=$(e);h.paramEnveloper||(h.paramEnveloper=new Ue(e));var v=h.paramEnveloper;if(typeof a=="function"&&(a=a()),ce(a)&&!u){t.setValueAtTime(a,0);return}var o=Array.isArray(a)?a:[a],d=l==="freq"?s:1;l==="gain"&&i==="freq"&&(d=s);var c={enveloper:v,type:l,envStarted:!1,attackRampNeeded:!!u,currValue:d,startTime:n,sweeping:!1,releaseTime:-1,releaseTarget:l==="freq"?-1:0},f=fe(e,r,o,s,n,l);if(o.forEach(p=>{typeof p=="function"&&(p=p()),ce(p)&&(p=l==="freq"?{t:0,f:p}:{t:p}),typeof p=="object"&&(p.type||Pe(t,p,c,s))}),c.attackRampNeeded){var g={a:K.a};Pe(t,g,c,s)}if(c.releaseTarget<0&&(c.releaseTarget=c.currValue),c.envStarted||(F("- no schedules, init to:",c.currValue),v.initParam(t,c.currValue)),u&&c.releaseTime<0&&(c.releaseTime=K.r),c.releaseTime>=0&&(r.envelopes.push({param:t,releaseTime:c.releaseTime,releaseTarget:c.releaseTarget,rootEnvelope:!!u}),F("- stored release:",c.releaseTime,"target",c.releaseTarget)),l==="freq"&&(i==="root"||i==="freq")){var w=c.currValue/s;w!==0&&r.bendables.push({param:t,mult:w})}return c=null,f}function ce(e){return typeof e!="number"?!1:!isNaN(e)}function M(e,t,r,s){return typeof s<"u"&&(e=s),typeof e=="function"&&(e=e()),ce(e)?r?e:e<0?t:e:t}function Pe(e,t,r,s){var n=M(t.w,0,!1),a=M(t.a,-1,!1),l=M(t.h,-1,!1),i=M(t.s,1,!1,t.p),u=M(t.x,1,!1)|0,h=M(t.k,0,!0);if(a>=0&&a<te&&(a=te),r.attackRampNeeded&&a<0){var v=l>0||i!==1;v&&(a=K.a)}var o=r.currValue||1;if(h!==0){var d=Math.pow(s/261.625,h);o*=d}n===0&&(u=1),u>1&&a<0&&(f!==1||g!==0)&&(a=te);var c=r.startTime,f=M(t.t,1,!1),g=M(t.f,0,!0),w=M(t.d,-1,!1,t.q),p=M(t.r,-1,!1),y=M(t.z,-1,!1),m=M(t.dr,-1,!0);m>=0&&(w=p=m),w<=0&&(w=K.d);for(var E=Math.max(u,1),S=0;S<E;S++){n>0&&(D(r,e,o),O(r,e,n),c+=n,(f!==1||g!==0)&&a<0&&(a=0)),a>=0&&D(r,e,o),S>0&&(o=r.enveloper.getValueAtTime(e,c)),o=o*f+g;var ye=80;r.type==="freq"&&o<ye&&g<0&&(o=2*ye-o,g=-g),a>=0&&(r.sweeping&&O(r,e,0),r.enveloper.addRamp(e,a,o),r.attackRampNeeded=!1,c+=a||0),l>0&&(D(r,e,o),O(r,e,l),c+=l),i!==1&&(D(r,e,o),o*=i,r.sweeping&&O(r,e,0),r.enveloper.addSweep(e,-1,o,w),r.sweeping=!0)}r.currValue=o,p>=0&&(r.releaseTime=p),y>=0&&(r.releaseTarget=r.currValue*y)}function O(e,t,r){e.enveloper.addHold(t,r||0),e.sweeping=!1}function D(e,t,r){e.envStarted||(e.attackRampNeeded&&(r=0),e.enveloper.initParam(t,r),e.enveloper.startEnvelope(t,e.startTime),e.envStarted=!0,F("- initted param:",r,"time",e.startTime))}var K={w:0,t:1,f:0,k:0,a:.05,h:0,d:.1,s:1,r:.1,z:-1,x:1},F=()=>{};function fe(e,t,r,s,n,a){for(var l=ke(r),i=[],u=0;u<l.length;u++){var h=l[u];if(typeof h=="function"&&(h=h()),typeof h=="string"&&(h={type:h}),typeof h=="object"&&!(typeof h.type>"u")){var v=h.type;typeof v=="function"&&(v=v()),v||(v="sine");var o=null,d=null;o=Se(e,v),d=o||ft(e,v),d.start&&d.start(n),t.nodes.push(d);var c=null,f=!o&&a==="root",g=f||h.gain||!o&&a==="freq";if(g&&(c=e.createGain(),t.nodes.push(c)),Ne(e,t,d,h,s,n,a,c,f),!o&&h.effect)for(var w=ke(h.effect),p=0;p<w.length;p++){var y=w[p];if(typeof y=="function"&&(y=y()),typeof y=="string"&&(y={type:y}),typeof y=="object"){var m=Se(e,y.type);m&&(Ne(e,t,m,y,s,n,a,null,!1),t.nodes.push(m),d.connect(m),d=m)}}c&&(d.connect(c),d=c),o?(i.forEach(S=>S.connect(d)),i=[d]):i.push(d)}}if(i.length===0)return null;if(i.length===1)return i.pop();var E=e.createGain();return t.nodes.push(E),i.forEach(S=>S.connect(E)),E}function ke(e){return typeof e=="function"&&(e=e()),Array.isArray(e)?e:[e]}function Ne(e,t,r,s,n,a,l,i,u){if(r.Q&&s.Q){var h=re(e,r.Q,t,n,a,s.Q,"Q",l,!1);h&&h.connect(r.Q)}if(r.frequency||r.playbackRate){var v=r.frequency||r.playbackRate,o=r.playbackRate?n/440:n,d=s.freq||{},c=re(e,v,t,o,a,d,"freq",l,!1);c&&c.connect(v)}var f=i?i.gain:r.gain||null;if(f){var g=re(e,f,t,n,a,s.gain,"gain",l,u);g&&g.connect(f)}}function Ve(e){var t={},r=[],s=new Ue(e);this.maxVoices=32,this.play=function(c,f,g,w,p,y){a(),n(this.maxVoices-1);var m=h(c,f,g,w,y);return r.push(m.id),t[m.id]=m,p&&o(m,p),m.id},this.bend=function(c,f,g,w){var p=t[c];p&&v(p,f,g,w)},this.release=function(c,f){var g=t[c];g&&o(g,f)},this.isPlaying=function(c){return!!t[c]},this.releaseAll=function(c){r.forEach(f=>{o(t[f],c)})},this.dispose=function(){n(0),t=null,r=null,clearInterval(l)};function n(c){for(;r.length>c;){var f=r.shift();d(t[f]),delete t[f]}}function a(){for(var c=e.currentTime,f=0;f<r.length;f++){var g=r[f],w=t[g];w.endTime===0||c<w.endTime||(d(w),delete t[g],r.splice(f,1),f--)}}var l=setInterval(a,800);function i(c){++u>9999&&(u=1),this.id=u,this.time=+c,this.endTime=0,this.nodes=[],this.envelopes=[],this.bendables=[]}var u=0;function h(c,f,g,w,p){var y=new i(w),m=fe(e,y,c,f,w,"root");if(!m){var E={type:"sine"};m=fe(e,y,E,f,w,"root")}if(g===1)m.connect(p);else{var S=e.createGain();y.nodes.push(S),S.gain.value=g<1?g*g:g,m.connect(S),S.connect(p)}return y}function v(c,f,g,w){c.endTime>0||c.bendables.forEach(p=>{var y=f*p.mult;p.param.cancelScheduledValues(w),p.param.setTargetAtTime(y,w,g)})}function o(c,f){c.endTime>0||(c.endTime=f,c.envelopes.forEach((g,w)=>{var p=g.releaseTime;if(p>=0){var y=g.param;s.startEnvelope(y,f);var m=g.releaseTarget||0;if(s.addSweep(y,-1,m,p),g.rootEnvelope){var E=f+4*p;c.endTime=Math.max(c.endTime,E)}}}))}function d(c){for(;c.nodes.length>0;){var f=c.nodes.pop();f.stop&&f.stop(),f.buffer&&(f.buffer=null),f.gain&&f.gain.cancelScheduledValues(0),f.frequency&&f.frequency.cancelScheduledValues(0),f.playbackRate&&f.playbackRate.cancelScheduledValues(0),f.Q&&f.Q.cancelScheduledValues(0),f.disconnect(),f=null}c.nodes=null,c.envelopes=null,c.bendables=null}}const Dt="wasgen",xt="0.18.4",Bt="Web Audio Sound Generator",Lt="src/index.js",Ft="dist/src/index.d.ts",Wt=["/src","/dist"],Ut={start:"cd demo && webpack serve",types:"tsc",build:"tsc; cd demo && webpack --env prod"},Ht="andy@fenomas.com",Qt="ISC",Gt="github:fenomas/wasgen",jt={"param-enveloper":"^0.3.0"},Kt={"audiobuffer-to-wav":"^1.0.0","webaudio-viz":"0.2.0"},zt={name:Dt,version:xt,description:Bt,main:Lt,typings:Ft,files:Wt,scripts:Ut,author:Ht,license:Qt,repository:Gt,dependencies:jt,devDependencies:Kt};var Xt=zt.version;function Jt(e=null,t=null,r=!1,s=!1){this.version=Xt,s||console.log(`wasgen     v${this.version}`);var n=e||new(window.AudioContext||window.webkitAudioContext),a=new Ve(n),l=()=>{n.startRendering||(n.state!=="running"&&n.resume(),ae(n))},i=t||n.destination;n.startRendering&&ae(n);var u=()=>n.currentTime+.05;this.play=function(o,d=440,c=1,f=0,g=0,w=null){l(),d=d||440,c=c||1,f>0||(f=u()),g=g||0,w=w||v||i;var p=a.play(o,d,c,f,g,w);return p},this.bend=function(o,d=440,c=.1,f=0){d=d||440,c=c||.1,f=f||u(),a.bend(o,d,c,f)},this.release=function(o,d=0){d=d||u(),a.release(o,d)},this.noteIsPlaying=function(o){return a.isPlaying(o)},this.releaseAll=function(o=0){o=o||u(),a.releaseAll(o)},this.compressor=null,this.now=function(){return n.currentTime},this.maxVoices=function(o=32){return o&&(a.maxVoices=o),a.maxVoices},this.destination=function(o){return o&&(i=o,h()),i},this.audioContext=function(o){return o&&(this.dispose(),n=o,a=new Ve(n),i=n.destination,h()),n};var h=()=>{v&&v.disconnect(),!r&&(v=n.createDynamicsCompressor(),v.threshold.value=-24,v.knee.value=25,v.ratio.value=20,v.attack.value=.003,v.release.value=.25,v.connect(i),this.compressor=v)},v=null;h(),this.dispose=function(){a.dispose(),a=null,v&&v.disconnect(),v=null,i=null,n=null}}var Qe={},ge={},we={};Object.defineProperty(we,"__esModule",{value:!0});class Yt{constructor(t){this.comparator=t.comparator,this.data=t.initialValues?t.initialValues.slice(0):[],this._heapify()}_heapify(){if(this.data.length>0)for(let t=0;t<this.data.length;t++)this._bubbleUp(t)}queue(t){this.data.push(t),this._bubbleUp(this.data.length-1)}dequeue(){const t=this.data[0],r=this.data.pop();return this.data.length>0&&r!==void 0&&(this.data[0]=r,this._bubbleDown(0)),t}peek(){return this.data[0]}clear(){this.data.length=0}_bubbleUp(t){for(;t>0;){const r=t-1>>>1;if(this.comparator(this.data[t],this.data[r])<0){const s=this.data[r];this.data[r]=this.data[t],this.data[t]=s,t=r}else break}}_bubbleDown(t){let r=this.data.length-1;for(;;){const s=(t<<1)+1,n=s+1;let a=t;if(s<=r&&this.comparator(this.data[s],this.data[a])<0&&(a=s),n<=r&&this.comparator(this.data[n],this.data[a])<0&&(a=n),a!==t){const l=this.data[a];this.data[a]=this.data[t],this.data[t]=l,t=a}else break}}}we.default=Yt;Object.defineProperty(ge,"__esModule",{value:!0});const Zt=we;class er{constructor(t){this._length=0,this._length=t.initialValues?t.initialValues.length:0,this.strategy=new Zt.default(t)}get length(){return this._length}queue(t){this._length++,this.strategy.queue(t)}dequeue(){if(!this._length)throw new Error("Empty queue");return this._length--,this.strategy.dequeue()}peek(){if(!this._length)throw new Error("Empty queue");return this.strategy.peek()}clear(){this._length=0,this.strategy.clear()}}ge.default=er;Object.defineProperty(Qe,"__esModule",{value:!0});const tr=ge;var rr=Qe.default=tr.default;const Ce=(e,t,r=0,s=0,n=!0)=>({node:e,previous:t,f:r,g:s,open:n});class nr{methods;maxIterations=1e6;constructor(t={}){this.methods={nodeToPrimitive:r=>r,getNeighbors:()=>[],getMoveCost:()=>1,getHeuristic:()=>1,...t}}findPath(t,r){const s=this.methods.nodeToPrimitive(t),n=this.methods.nodeToPrimitive(r),a=new rr({comparator:(d,c)=>d.f-c.f}),l={},i=Ce(t,null,0,0,!0);a.queue(i),l[s]=i;let u=0;for(;a.length>0;){if(u++>this.maxIterations)throw new Error("Infinite loop!");const d=a.dequeue();if(!d.open)continue;if(this.methods.nodeToPrimitive(d.node)===n)break;d.open=!1,this.methods.getNeighbors(d.node).forEach(f=>{const g=this.methods.getMoveCost(d.node,f);if(g<0)return;const w=this.methods.nodeToPrimitive(f),p=l[w],y=d.g+g;if(p&&p.g<=y)return;const m=this.methods.getHeuristic(f,r);if(p)p.open=!0,p.g=y,p.f=y+m,p.previous=d,a.queue(p);else{const E=Ce(f,d,y+m,y,!0);l[w]=E,a.queue(E)}})}a.clear();const h=l[n];if(!h)return[];const v=[h.node];let o=h;for(;o.previous;)v.push(o.previous.node),o=o.previous;return v.reverse()}}const sr={type:"sine",freq:{type:"triangle",gain:{t:3,a:.01,h:.01,d:.7,s:.1,r:.05,k:-1.2}},gain:{t:.4,a:.005,h:.01,d:.7,s:0}},ar={type:"triangle",freq:{type:"triangle",freq:{t:3},gain:{t:4,a:.01,h:.01,d:.4,s:.1,r:.05,k:-1}},gain:{t:.4,a:.005,h:.01,d:.7,s:0}},Ge=e=>Math.pow(2,(e-69)/12)*440,W=(e=0,t=1)=>e+Math.random()*(t-e+1)|0;let x=0;const je=[0,2,4,5,7,9,11],ir=(e=0)=>[e,e+2,e+4].map(t=>je[t%7]),Ke=.4,ze=.5,he=(e=0)=>je.includes(e%12),Re=e=>{const t=e.now()+.05,r=t+Ke*3,s=[1,5,6,4],n=[60,48,60,60],a=ir(s[x%4]-1).map(l=>l+n[x%4]);a.push(a[0]-12),a.forEach(l=>{e.play(sr,Ge(l),ze,t,r)}),x=(x+1)%4},lr=new nr({getNeighbors:e=>[0,0,0,0].map(()=>e+W(-3,3)),getHeuristic:(e,t)=>5+Math.abs(e-t)+W(0,3),getMovementCost:(e,t)=>Math.abs(e-t)+W(1,2)+(he(t)?1:2)});console.log("finder");let P=72;const or=e=>{let t=P+W(-6,6);t===P&&t++,he(t)||t++,Math.abs(t-P)>8&&(t+=t>P?-12:12);const r=lr.findPath(P,t);hr(`[${r.join(", ")}]`);let s=Ke*2;r.length>2&&(s/=2),r.length>4&&(s/=2);let n=e.now()+.05;r.forEach((a,l)=>{e.play(ar,Ge(a),ze,n,n+s),n+=s}),P=(72+t)/2|0,he(P)||P++};var ur=Le("<div><button></button><br><br><pre>Path: ");const[B,cr]=ve(null),[Xe,Ie]=ve(!1),[fr,hr]=ve(""),L=[],vr=()=>{B()||cr(new Jt),Xe()?(clearInterval(L.pop()),clearInterval(L.pop()),Ie(!1)):(Re(B()),L.push(setInterval(()=>Re(B()),1600)),L.push(setInterval(()=>or(B()),1600)),Ie(!0))},dr=()=>(()=>{var e=ur(),t=e.firstChild,r=t.nextSibling,s=r.nextSibling,n=s.nextSibling;return n.firstChild,t.$$click=vr,Q(t,()=>Xe()?"Stop":"Start"),n.style.setProperty("font-size","200%"),Q(n,fr,null),e})();ut(["click"]);var pr=Le("<main><h2>A* Music Demo!");const gr=document.getElementById("root");ot(()=>(()=>{var e=pr();return e.firstChild,Q(e,it(dr,{}),null),e})(),gr);
//# sourceMappingURL=index-BvUL-Zk_.js.map
